# 叙事者人格 - 快速参考卡

## ?? 颜色 → 人格速查

| 颜色 | RGB 示例 | 人格 |
|-----|---------|------|
| ?? **红色** | (0.8, 0.2, 0.2) | Chaotic/Sadistic |
| ?? **橙色** | (0.9, 0.5, 0.2) | Protective |
| ?? **黄色** | (0.9, 0.9, 0.3) | Benevolent |
| ?? **绿色** | (0.3, 0.8, 0.3) | Benevolent |
| ?? **蓝色** | (0.3, 0.5, 0.8) | Strategic |
| ?? **紫色** | (0.6, 0.3, 0.7) | Manipulative |
| ? **灰白** | (0.8, 0.8, 0.8) | Strategic |
| ? **黑红** | (0.4, 0.1, 0.1) | Sadistic |

---

## ?? 简介关键词速查

### Benevolent（仁慈）
```
kind, caring, gentle, nurture, protect, help, compassion
仁慈、善良、关怀、帮助、保护
```

### Sadistic（施虐）
```
cruel, sadistic, torment, suffering, enjoy struggles
残忍、折磨、痛苦、享受挣扎
```

### Chaotic（混乱）
```
chaos, random, wild, unpredictable, erratic
混乱、随机、狂野、不可预测
```

### Strategic（战略）
```
strategic, rational, calculated, balanced, planning
战略、理性、计算、平衡、计划
```

### Protective（保护）
```
protect, guardian, shield, defend, watch over
保护、守护、防御、照看
```

### Manipulative（操控）
```
manipulate, cunning, scheme, control, subtle
操控、狡猾、诡计、控制、微妙
```

---

## ??? 对话风格参数

| 参数 | 0.0 | 0.5 | 1.0 |
|-----|-----|-----|-----|
| **formalityLevel** | 极度随意 | 平衡 | 极度正式 |
| **emotionalExpression** | 冷静理性 | 适度 | 情绪丰富 |
| **verbosity** | 极简 | 适中 | 冗长 |
| **humorLevel** | 严肃 | 偶尔 | 经常幽默 |
| **sarcasmLevel** | 直白 | 偶尔 | 满是讽刺 |

---

## ?? 快速创建模板

### 最小化定义

```xml
<NarratorPersonaDef>
  <defName>MyNarrator</defName>
  <narratorName>名称</narratorName>
  <primaryColor>(R, G, B, 1.0)</primaryColor>
  <biography>简介...</biography>
</NarratorPersonaDef>
```

### 完整定义

```xml
<NarratorPersonaDef>
  <defName>MyNarrator</defName>
  <narratorName>名称</narratorName>
  
  <primaryColor>(R, G, B, 1.0)</primaryColor>
  <biography>简介...</biography>
  
  <overridePersonality>Benevolent</overridePersonality>
  
  <dialogueStyle>
    <formalityLevel>0.5</formalityLevel>
    <emotionalExpression>0.5</emotionalExpression>
    <verbosity>0.5</verbosity>
    <humorLevel>0.3</humorLevel>
    <sarcasmLevel>0.2</sarcasmLevel>
  </dialogueStyle>
  
  <eventPreferences>
    <positiveEventBias>0.2</positiveEventBias>
    <chaosLevel>0.3</chaosLevel>
    <interventionFrequency>0.5</interventionFrequency>
  </eventPreferences>
  
  <toneTags>
    <li>gentle</li>
  </toneTags>
</NarratorPersonaDef>
```

---

## ?? 测试命令

```csharp
// 1. 测试颜色分析
var result = PersonaAnalyzer.AnalyzePortraitColor(new Color(0.8f, 0.2f, 0.2f));
Log.Message($"颜色分析：{result}");

// 2. 测试简介分析
var bio = "She is kind and caring...";
var analysis = PersonaAnalyzer.AnalyzeBiography(bio);
Log.Message($"人格：{analysis.SuggestedPersonality}");

// 3. 切换人格
var manager = Current.Game.GetComponent<NarratorManager>();
manager.SwitchPersona("Phoebe_Chillax");

// 4. 查看当前 Prompt
var prompt = manager.GetDynamicSystemPrompt();
Log.Message(prompt);
```

---

## ?? 内置人格对比

| 人格 | 颜色 | 特质 | 风格 | 事件倾向 |
|-----|------|------|------|---------|
| **Cassandra** | 蓝色 | Strategic | 正式、理性 | 平衡 |
| **Phoebe** | 橙黄 | Benevolent | 随意、温暖 | 正面 +0.4 |
| **Randy** | 红色 | Chaotic | 随意、幽默 | 混乱 0.9 |
| **Igor** | 深红 | Sadistic | 讽刺、严厉 | 负面 +0.5 |
| **Luna** | 浅蓝 | Protective | 温柔、权威 | 正面 +0.3 |

---

## ? 常见问题

**Q: 颜色和简介冲突怎么办？**  
A: 简介优先。或使用 `overridePersonality` 手动指定。

**Q: 如何创建复合人格？**  
A: 在简介中混合多种关键词，系统会选择得分最高的。

**Q: 可以动态改变人格吗？**  
A: 目前不支持，但可以在代码中监听好感度事件并调用 `SwitchPersona()`。

**Q: 如何测试对话效果？**  
A: 切换人格后，在游戏中打开 AI 窗口，输入测试问题观察回复风格。

---

**完整文档**: [人格生成系统指南.md](人格生成系统指南.md)
