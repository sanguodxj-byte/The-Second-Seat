### 人格列表右键菜单添加"打开人格数据文件夹"功能

#### 修改文件
`Source/TheSecondSeat/UI/PersonaSelectionWindow.cs`

#### 修改位置
在 `ShowPersonaContextMenu` 方法的底部，添加分隔线和新菜单项：

```csharp
// 在现有代码的这个位置（大约 line 430）：
// 打 Mod 立绘目录（推荐，功能最完整）
options.Add(new FloatMenuOption("打开 Mod 立绘目录", () => PortraitLoader.OpenModPortraitsDirectory()));

// ? 在上面添加：
// 分隔线
options.Add(new FloatMenuOption("--- 文件夹 ---", null));

// ? 新增：打开人格数据文件夹
options.Add(new FloatMenuOption("打开人格数据文件夹", () => OpenPersonaDefsFolder()));
```

#### 添加新方法
在类的底部（`DeletePersona` 方法之后），添加新方法：

```csharp
/// <summary>
/// ? 打开人格数据文件夹（Defs/NarratorPersonaDefs）
/// </summary>
private void OpenPersonaDefsFolder()
{
    try
    {
        // 获取 Mod 目录
        var modContentPack = LoadedModManager.RunningModsListForReading
            .FirstOrDefault(mod => mod.PackageId.ToLower().Contains("thesecondseat") || 
                                  mod.Name.Contains("Second Seat"));
        
        if (modContentPack == null)
        {
            Messages.Message("无法找到 The Second Seat Mod", MessageTypeDefOf.RejectInput);
            return;
        }
        
        // 人格 Def 文件夹路径：Defs/
        string defsPath = Path.Combine(modContentPack.RootDir, "Defs");
        
        // 确保文件夹存在
        if (!Directory.Exists(defsPath))
        {
            Directory.CreateDirectory(defsPath);
            Log.Message($"[PersonaSelectionWindow] 创建 Defs 目录: {defsPath}");
        }
        
        // 打开文件夹
        Application.OpenURL("file://" + defsPath);
        
        Messages.Message(
            $"已打开人格数据文件夹:\n{defsPath}\n\n" +
            "?? 提示：\n" +
            "- 人格 XML 文件存储在此目录\n" +
            "- 可手动编辑 NarratorPersonaDefs_*.xml 文件\n" +
            "- 修改后需重启游戏生效",
            MessageTypeDefOf.NeutralEvent
        );
        
        Log.Message($"[PersonaSelectionWindow] 打开人格数据文件夹: {defsPath}");
    }
    catch (Exception ex)
    {
        Log.Error($"[PersonaSelectionWindow] 打开人格数据文件夹失败: {ex.Message}");
        Messages.Message($"打开文件夹失败: {ex.Message}", MessageTypeDefOf.RejectInput);
    }
}
```

#### 完整修改后的菜单结构（ShowPersonaContextMenu 底部）

```csharp
// 复制人格
options.Add(new FloatMenuOption("复制", () => DuplicatePersona(persona)));

// ? 删除人格（对内置叙事者人格禁用）
string[] protectedPersonas = { "Cassandra_Classic", "Randy_Random", "Phoebe_Chillax" };
bool isProtected = protectedPersonas.Contains(persona.defName);

if (!isProtected)
{
    options.Add(new FloatMenuOption("删除", () => DeletePersona(persona)));
}

// ? 分隔线
options.Add(new FloatMenuOption("--- 文件夹 ---", null));

// ? 新增：打开人格数据文件夹
options.Add(new FloatMenuOption("打开人格数据文件夹", () => OpenPersonaDefsFolder()));

// 打开 Mod 立绘目录
options.Add(new FloatMenuOption("打开 Mod 立绘目录", () => PortraitLoader.OpenModPortraitsDirectory()));

// 打开用户立绘目录
options.Add(new FloatMenuOption("打开用户立绘目录", () => PortraitLoader.OpenUserPortraitsDirectory()));

Find.WindowStack.Add(new FloatMenu(options));
```

---

### 功能说明

**新增菜单项**：
- ?? **打开人格数据文件夹** - 打开 `Mods/TheSecondSeat/Defs/` 目录

**用途**：
1. 查看所有人格 XML 文件
2. 手动编辑人格定义
3. 备份人格数据
4. 删除不需要的人格文件

**提示信息**：
- 显示文件夹完整路径
- 提示可手动编辑 XML
- 提示修改后需重启游戏

**与其他菜单项的区别**：
- **打开人格数据文件夹** → `Defs/` (XML 人格定义文件)
- **打开 Mod 立绘目录** → `Textures/UI/Narrators/` (立绘图片文件)
- **打开用户立绘目录** → 用户自定义立绘目录

---

### 使用方法

1. 在人格选择窗口中
2. **右键点击任意人格卡片**
3. 选择"**打开人格数据文件夹**"
4. 文件资源管理器自动打开 `Defs/` 目录

### 测试验证

编译后测试：
```powershell
cd "C:\Users\Administrator\Desktop\rim mod\The Second Seat"
dotnet build Source\TheSecondSeat\TheSecondSeat.csproj -c Release
Copy-Item "Source\TheSecondSeat\bin\Release\net472\TheSecondSeat.dll" "D:\steam\steamapps\common\RimWorld\Mods\TheSecondSeat\Assemblies\" -Force
```

在游戏中：
1. 点击AI叙事者按钮
2. 右键点击人格卡片
3. 选择"打开人格数据文件夹"
4. ? 应该打开 `Defs/` 文件夹

---

### 预期效果

**菜单结构**：
```
编辑名称
编辑简介
更换立绘
复制
删除 (非内置人格)
--- 文件夹 ---
打开人格数据文件夹  ← ? 新增
打开 Mod 立绘目录
打开用户立绘目录
```

**成功提示**：
```
已打开人格数据文件夹:
C:\Users\...\Mods\TheSecondSeat\Defs

?? 提示：
- 人格 XML 文件存储在此目录
- 可手动编辑 NarratorPersonaDefs_*.xml 文件
- 修改后需重启游戏生效
```
