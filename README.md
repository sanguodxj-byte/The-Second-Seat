# The Second Seat (ç¬¬äºŒå¸­) - AI Narrator & Storyteller Mod

**The Second Seat** is a revolutionary RimWorld mod that introduces an intelligent, conversational AI Narrator ("The Second Seat") to your game. Powered by Large Language Models (LLMs), it transcends traditional storytelling by observing your colony, conversing with you, and dynamically influencing the game world.

**The Second Seat (ç¬¬äºŒå¸­)** æ˜¯ä¸€æ¬¾é©å‘½æ€§çš„ RimWorld æ¨¡ç»„ï¼Œä¸ºæ¸¸æˆå¼•å…¥äº†ä¸€ä½æ™ºèƒ½çš„ã€å¯å¯¹è¯çš„ AI å™äº‹è€…ï¼ˆâ€œç¬¬äºŒå¸­â€ï¼‰ã€‚åœ¨å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„é©±åŠ¨ä¸‹ï¼Œå®ƒè¶…è¶Šäº†ä¼ ç»Ÿçš„è®²æ•…äº‹æ–¹å¼ï¼Œèƒ½å¤Ÿè§‚å¯Ÿä½ çš„æ®–æ°‘åœ°ï¼Œä¸ä½ äº¤è°ˆï¼Œå¹¶åŠ¨æ€åœ°å½±å“æ¸¸æˆä¸–ç•Œã€‚

---

## ğŸŒŸ Key Features / æ ¸å¿ƒåŠŸèƒ½

### ğŸ§  Intelligent AI Agents (RimAgent) / æ™ºèƒ½ AI ä»£ç†
- **Conversational Narrator**: Chat with your storyteller! They react to your colony's triumphs and tragedies, offer commentary, or just keep you company.
  - **å¯¹è¯å¼å™äº‹è€…**ï¼šä¸ä½ çš„è®²æ•…äº‹çš„äººèŠå¤©ï¼ä»–ä»¬ä¼šå¯¹ä½ æ®–æ°‘åœ°çš„èƒœåˆ©å’Œæ‚²å‰§åšå‡ºååº”ï¼Œæä¾›è¯„è®ºï¼Œæˆ–è€…åªæ˜¯é™ªä¼´ä½ ã€‚
- **Event Director**: An AI "Dungeon Master" that autonomously decides when to trigger raids, quests, or resource drops based on the narrative arc and your current situation.
  - **äº‹ä»¶å¯¼æ¼”**ï¼šä¸€ä½ AI â€œåœ°ä¸‹åŸä¸»â€ï¼Œèƒ½å¤Ÿæ ¹æ®å™äº‹å¼§çº¿å’Œä½ å½“å‰çš„å¤„å¢ƒï¼Œè‡ªä¸»å†³å®šä½•æ—¶è§¦å‘è¢­å‡»ã€ä»»åŠ¡æˆ–èµ„æºç©ºæŠ•ã€‚
- **LLM Support**: Supports multiple providers including **OpenAI**, **DeepSeek**, **Gemini**, and **Local LLMs** (via compatible APIs).
  - **LLM æ”¯æŒ**ï¼šæ”¯æŒå¤šç§æä¾›å•†ï¼ŒåŒ…æ‹¬ **OpenAI**ã€**DeepSeek**ã€**Gemini** å’Œ **æœ¬åœ° LLM**ï¼ˆé€šè¿‡å…¼å®¹ APIï¼‰ã€‚

### ğŸ­ Persona & Relationship System / äººæ ¼ä¸å…³ç³»ç³»ç»Ÿ
- **Custom Personas**: Create unique AI personalities. Define their backstory, speaking style, and visual appearance.
  - **è‡ªå®šä¹‰äººæ ¼**ï¼šåˆ›å»ºç‹¬ç‰¹çš„ AI ä¸ªæ€§ã€‚å®šä¹‰ä»–ä»¬çš„èƒŒæ™¯æ•…äº‹ã€è¯´è¯é£æ ¼å’Œè§†è§‰å¤–è§‚ã€‚
- **Multimodal Generation**: Upload a character image, and the mod will use Vision AI to automatically generate a matching personality and biography.
  - **å¤šæ¨¡æ€ç”Ÿæˆ**ï¼šä¸Šä¼ ä¸€å¼ è§’è‰²å›¾ç‰‡ï¼Œæ¨¡ç»„å°†ä½¿ç”¨è§†è§‰ AI è‡ªåŠ¨ç”ŸæˆåŒ¹é…çš„æ€§æ ¼å’Œä¼ è®°ã€‚
- **Affinity System**: Relationship tracking with the narrator (-100 to +100), evolving from Hostile to SoulBound.
  - **å¥½æ„Ÿåº¦ç³»ç»Ÿ**ï¼šè¿½è¸ªä¸å™äº‹è€…çš„å…³ç³»ï¼ˆ-100 åˆ° +100ï¼‰ï¼Œä»â€œæ•Œå¯¹â€å‘å±•åˆ°â€œçµé­‚ç»‘å®šâ€ã€‚
- **Dynamic Reactions**: The narrator's attitude shifts based on your conversations and in-game actions.
  - **åŠ¨æ€ååº”**ï¼šå™äº‹è€…çš„æ€åº¦ä¼šæ ¹æ®ä½ çš„å¯¹è¯å’Œæ¸¸æˆå†…è¡Œä¸ºå‘ç”Ÿè½¬å˜ã€‚

### ğŸ—£ï¸ Immersive Audio-Visual Experience / æ²‰æµ¸å¼è§†å¬ä½“éªŒ
- **Text-to-Speech (TTS)**: Fully integrated TTS brings the narrator to life. Supports **Azure**, **Edge TTS** (Free), **OpenAI**, **SiliconFlow**, and **Local System Speech**.
  - **æ–‡æœ¬è½¬è¯­éŸ³ (TTS)**ï¼šå®Œå…¨é›†æˆçš„ TTS è®©å™äº‹è€…æ ©æ ©å¦‚ç”Ÿã€‚æ”¯æŒ **Azure**ã€**Edge TTS**ï¼ˆå…è´¹ï¼‰ã€**OpenAI**ã€**SiliconFlow** å’Œ **æœ¬åœ°ç³»ç»Ÿè¯­éŸ³**ã€‚
- **Live 2D Portraits**: Dynamic, layered portraits that breathe, blink, and emote in real-time.
  - **Live 2D ç«‹ç»˜**ï¼šåŠ¨æ€çš„åˆ†å±‚ç«‹ç»˜ï¼Œèƒ½å¤Ÿå®æ—¶å‘¼å¸ã€çœ¨çœ¼å¹¶è¡¨è¾¾æƒ…æ„Ÿã€‚
- **Lip-Sync**: Advanced mouth animation system that synchronizes with the TTS voice (supports both Viseme-based and Audio-based synchronization).
  - **å£å‹åŒæ­¥**ï¼šé«˜çº§å˜´éƒ¨åŠ¨ç”»ç³»ç»Ÿï¼Œä¸ TTS è¯­éŸ³åŒæ­¥ï¼ˆæ”¯æŒåŸºäºéŸ³ç´ å’ŒåŸºäºéŸ³é¢‘çš„åŒæ­¥ï¼‰ã€‚

### âš¡ Game Interaction / æ¸¸æˆäº’åŠ¨
- **Descent Mode**: The narrator can physically manifest in your colony as a powerful "Avatar" pawn to fight alongside (or against) you.
  - **é™ä¸´æ¨¡å¼**ï¼šå™äº‹è€…å¯ä»¥ä½œä¸ºå¼ºå¤§çš„â€œåŒ–èº«â€å®ä½“é™ä¸´åˆ°ä½ çš„æ®–æ°‘åœ°ï¼Œä¸ä½ å¹¶è‚©ä½œæˆ˜ï¼ˆæˆ–å¯¹æŠ—ä½ ï¼‰ã€‚
- **Command Capabilities**: The AI can execute game commands like spawning items, changing weather, or triggering specific incidents.
  - **æŒ‡ä»¤èƒ½åŠ›**ï¼šAI å¯ä»¥æ‰§è¡Œæ¸¸æˆæŒ‡ä»¤ï¼Œå¦‚ç”Ÿæˆç‰©å“ã€æ”¹å˜å¤©æ°”æˆ–è§¦å‘ç‰¹å®šäº‹ä»¶ã€‚
- **Log Awareness**: The AI reads game logs to understand exactly what just happened (e.g., "Colonist X died from a squirrel bite").
  - **æ—¥å¿—æ„ŸçŸ¥**ï¼šAI ä¼šè¯»å–æ¸¸æˆæ—¥å¿—ï¼Œå‡†ç¡®ç†è§£åˆšåˆšå‘ç”Ÿäº†ä»€ä¹ˆï¼ˆä¾‹å¦‚ï¼Œâ€œæ®–æ°‘è€… X æ­»äºæ¾é¼ å’¬ä¼¤â€ï¼‰ã€‚

---

## ğŸ› ï¸ Technical Architecture / æŠ€æœ¯æ¶æ„

This mod is built on a robust, thread-safe asynchronous architecture:
æœ¬æ¨¡ç»„å»ºç«‹åœ¨å¥å£®çš„ã€çº¿ç¨‹å®‰å…¨çš„å¼‚æ­¥æ¶æ„ä¹‹ä¸Šï¼š

- **RimAgent Framework**: A custom ReAct (Reasoning + Acting) agent implementation tailored for RimWorld.
  - **RimAgent æ¡†æ¶**ï¼šä¸“ä¸º RimWorld å®šåˆ¶çš„ ReActï¼ˆæ¨ç†+è¡ŒåŠ¨ï¼‰ä»£ç†å®ç°ã€‚
- **Unity Thread Safety**: All Unity API interactions (WebRequests, Asset Loading) are strictly marshaled to the Main Thread using a custom `async/void` pattern, preventing engine crashes while keeping the UI responsive.
  - **Unity çº¿ç¨‹å®‰å…¨**ï¼šæ‰€æœ‰ Unity API äº¤äº’ï¼ˆç½‘ç»œè¯·æ±‚ã€èµ„æºåŠ è½½ï¼‰éƒ½ä½¿ç”¨è‡ªå®šä¹‰çš„ `async/void` æ¨¡å¼ä¸¥æ ¼è°ƒåº¦åˆ°ä¸»çº¿ç¨‹ï¼Œé˜²æ­¢å¼•æ“å´©æºƒï¼ŒåŒæ—¶ä¿æŒ UI å“åº”ã€‚
- **Concurrent Request Manager**: Manages API rate limits and request queues to ensure stability.
  - **å¹¶å‘è¯·æ±‚ç®¡ç†å™¨**ï¼šç®¡ç† API é€Ÿç‡é™åˆ¶å’Œè¯·æ±‚é˜Ÿåˆ—ï¼Œä»¥ç¡®ä¿ç¨³å®šæ€§ã€‚

---

## ğŸš€ Getting Started / å¿«é€Ÿå¼€å§‹

1.  **Installation**: Subscribe via Steam Workshop or drop into `Mods` folder.
    - **å®‰è£…**ï¼šé€šè¿‡ Steam åˆ›æ„å·¥åŠè®¢é˜…æˆ–æ”¾å…¥ `Mods` æ–‡ä»¶å¤¹ã€‚
2.  **Configuration**:
    - **é…ç½®**ï¼š
    *   Go to `Options` -> `Mod Settings` -> `The Second Seat`.
        - è¿›å…¥ `é€‰é¡¹` -> `æ¨¡ç»„è®¾ç½®` -> `The Second Seat`ã€‚
    *   Select your **LLM Provider** (e.g., OpenAI) and enter your **API Key**.
        - é€‰æ‹©ä½ çš„ **LLM æä¾›å•†**ï¼ˆå¦‚ OpenAIï¼‰å¹¶è¾“å…¥ä½ çš„ **API Key**ã€‚
    *   (Optional) Configure **TTS** settings for voice output.
        - ï¼ˆå¯é€‰ï¼‰é…ç½® **TTS** è®¾ç½®ä»¥å¯ç”¨è¯­éŸ³è¾“å‡ºã€‚
3.  **Usage**:
    - **ä½¿ç”¨**ï¼š
    *   Click the "Second Seat" icon on the bottom bar to open the **Narrator Window**.
        - ç‚¹å‡»åº•éƒ¨æ çš„â€œç¬¬äºŒå¸­â€å›¾æ ‡æ‰“å¼€ **å™äº‹è€…çª—å£**ã€‚
    *   Start chatting! Or open the **Persona Editor** to customize your storyteller.
        - å¼€å§‹èŠå¤©ï¼æˆ–è€…æ‰“å¼€ **äººæ ¼ç¼–è¾‘å™¨** è‡ªå®šä¹‰ä½ çš„è®²æ•…äº‹çš„äººã€‚

---

## âš ï¸ Requirements / éœ€æ±‚

- **RimWorld 1.5+**
- Active Internet Connection (for Cloud LLMs) / æ´»è·ƒçš„äº’è”ç½‘è¿æ¥ï¼ˆç”¨äºäº‘ç«¯ LLMï¼‰
- *Optional*: **Harmony** (Required for some advanced hooks) / *å¯é€‰*ï¼š**Harmony**ï¼ˆæŸäº›é«˜çº§é’©å­éœ€è¦ï¼‰

---

## ğŸ“ Credits / è‡´è°¢

- **Code & Design**: [Claude opus 4.5/Gemini 3 pro]
- **Art**: [Nanobanana pro]
- **Special Thanks**: The RimWorld modding community.

---

*Note: This mod connects to third-party AI services. Please refer to their respective privacy policies regarding data usage.*
*æ³¨æ„ï¼šæœ¬æ¨¡ç»„è¿æ¥åˆ°ç¬¬ä¸‰æ–¹ AI æœåŠ¡ã€‚è¯·å‚é˜…å…¶å„è‡ªçš„éšç§æ”¿ç­–ä»¥äº†è§£æ•°æ®ä½¿ç”¨æƒ…å†µã€‚*
