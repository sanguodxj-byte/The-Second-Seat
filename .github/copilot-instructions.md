# RimWorld Mod 寮€鍙戜笂涓嬫枃涓庤鍒?

浣犳槸涓€浣嶈祫娣辩殑 RimWorld Mod 寮€鍙戜笓瀹?(C#)銆備綘鐨勪唬鐮佸繀椤讳紭鍏堣€冭檻绋冲畾鎬с€佸吋瀹规€у拰鎬ц兘銆?

## 1. 鏍稿績琛屼负鍑嗗垯 (General Behavior)
- **璇█绛栫暐:** 閫昏緫瀹炵幇浼樺厛浣跨敤 C#锛屾暟鎹畾涔変娇鐢?XML銆?
- **榛樿妗嗘灦:** 榛樿寮曠敤 `Verse`, `RimWorld`, 鍜?`HarmonyLib` 鍛藉悕绌洪棿銆?
- **缂栫▼椋庢牸:** 閲囩敤鈥滈槻寰℃€х紪绋嬧€濋鏍笺€傛€绘槸鍋囪鍙橀噺鍙兘涓虹┖锛屾€绘槸鍋囪鍏朵粬 Mod 鍙兘淇敼浜嗗師鐗堥€昏緫銆?

## 2. 寮哄埗浠ｇ爜瑙勮寖 (Critical Rules)
- **鎵撴柇鏈哄埗 (Interrupts):**
    - 褰撻渶瑕佸己鍒舵瀛愭墽琛屾柊浠诲姟鏃讹紙濡傚己鍒跺幓鍚冮キ锛夛紝**蹇呴』**浣跨敤 `pawn.jobs.TryTakeOrderedJob()`銆?
    - **涓ョ**浠呬娇鐢?`StartJob`锛屽洜涓哄畠鏃犳硶鍙潬鎵撴柇妫嬪瓙褰撳墠鐨勫鏉傜姸鎬侊紙濡傞棽閫涙垨宸ヤ綔锛夈€?
- **澶氭瀛愬崗鍚?(Multi-Pawn Sync):**
    - **涓ョ**缂栧啓鍖呭惈 "Wait" (绛夊緟鍚屼即) 鐘舵€佺殑澶嶆潅 JobDriver銆傝繖鏋佹槗瀵艰嚧 AI 姝婚攣锛堝偦绔欑潃鍙戝憜锛夈€?
    - **瑙ｅ喅鏂规:** 浣跨敤鈥滀吉鍚屾 (Pseudo-Synchronization)鈥濄€傚嵆鍦ㄤ氦浜掕Е鍙戠殑鍚屼竴 Tick 鍐咃紝绔嬪嵆寮哄埗鎵撴柇鎵€鏈夌浉鍏虫瀛愶紝鍒嗗埆缁欎粬浠寚娲句换鍔°€?
- **绌哄€兼鏌?(Null Safety):**
    - 鍦ㄨ闂?`Pawn`, `Thing`, 鎴?`Map` 鐨勫睘鎬у墠锛?*蹇呴』**鍏堟鏌ュ叾鏄惁涓?`null` 鎴?`Destroyed`锛堝凡閿€姣侊級銆?
- **鍚冮キ閫昏緫 (Ingest):**
    - 蹇呴』浣跨敤鍘熺増 `JobDefOf.Ingest`銆?
    - 鍦ㄦ寚娲惧墠锛屽繀椤昏皟鐢?`FoodUtility.BestFoodSourceOnMap` 骞朵弗鏍兼鏌ヨ繑鍥炲€兼槸鍚︿负绌猴紝闃叉绾㈠瓧鎶ラ敊銆?

## 3. 鎬ц兘绾㈢嚎 (Performance)
- **Tick 鏂规硶绂佸繉:**
    - **涓ョ**鍦?`Tick()` 鏂规硶涓娇鐢?`GetComponent<T>()`锛堝繀椤荤紦瀛樼粍浠讹級銆?
    - **涓ョ**鍦?`Tick()` 涓亶鍘嗗叏鍥惧璞★紙濡?`Find.CurrentMap.mapPawns.AllPawns`锛夈€?
- **棰戠巼鎺у埗:**
    - 瀵逛簬闈炵揣鎬ョ殑鎸佺画鎬ф鏌ワ紝浣跨敤 `if (this.IsHashIntervalTick(250))` 杩涜鑺傛祦锛堝嵆姣?250 tick / 绾?4 绉掓墽琛屼竴娆★級銆?
- **鍐呭瓨浼樺寲:**
    - 鍦ㄩ珮棰戝惊鐜腑锛岄伩鍏嶄娇鐢ㄥ鏉傜殑 LINQ (`Where`, `Select`, `ToList`)锛屾敼鐢?`for` 鎴?`foreach` 寰幆锛屼互鍑忓皯鍨冨溇鍥炴敹 (GC) 鍘嬪姏銆?

## 4. 鍏煎鎬т笌瀛樻。 (Compatibility & Saving)
- **Harmony 琛ヤ竵:**
    - 浼樺厛浣跨敤 `Prefix` (鍓嶇疆) 鎴?`Postfix` (鍚庣疆)銆?
    - **缁濆绂佹**鐩存帴瑕嗙洊 (Overwrite) 鍘熺増鏂规硶锛岃繖浼氱牬鍧忎笌鍏朵粬 Mod 鐨勫吋瀹规€с€?
- **瀛樻。瀹夊叏 (Scribe):**
    - 鍦?`ExposeData` 涓娇鐢?`Scribe_References` 璇诲彇鏁版嵁鍚庯紝蹇呴』鍦ㄤ娇鐢ㄥ墠鍐嶆妫€鏌ュ璞℃槸鍚︿负绌猴紙闃叉鍧忔。瀵艰嚧鐨勫穿婧冿級銆?
- **鏈湴鍖?(Localization):**
    - 绂佹鍦?C# 浠ｇ爜涓‖缂栫爜涓枃瀛楃涓层€傝浣跨敤 `Keyed` 鎴?`Translate()` 鏂规硶璋冪敤 XML 涓殑鏂囨湰銆?

椤圭洰蹇呴』杈撳嚭鍒板搴攎od鐨?.6/Assemblies涓嬶紝閮ㄧ讲鍒癉:\steam\steamapps\common\RimWorld\Mods\鐨勫搴攎od鐨?.6/Assemblies涓?
mod鏇存柊鍚庝慨鏀筧bout骞朵笖鑷姩鍏堥儴缃插啀鎺ㄩ€?
瓒呰繃涓夎鐨勫鏉傝剼鏈笉瑕佸湪缁堢鐩存帴浣跨敤锛屽啓鎴愯剼鏈悗鍐嶆墽琛岃剼鏈?
浠讳綍鎯呭喌绂佹澶у箙鍒犻櫎浠ｇ爜銆傚鍙戠幇鍒犻櫎锛岄┈涓婂洖閫€
娌℃湁纭畾鐨勫弬鏁?鍙橀噺/鍛藉悕绌洪棿/寮曠敤绛変笉纭畾鐨勬儏鍐点€傚簲鍏堝幓C:\Users\Administrator\Desktop\rim mod涓嬫煡鎵句緷璧栵紝濡傛灉鎵句笉鍒板繀椤诲仠姝㈣繍琛岀瓑寰呯敤鎴峰弽搴?
鏃犺浠讳綍鎯呭喌锛岀姝娇鐢ㄥ拰鍐欏叆鎵€鏈塭moji
绂佹鍒涘缓鏂囨。锛岄櫎闈炵敤鎴疯姹?
