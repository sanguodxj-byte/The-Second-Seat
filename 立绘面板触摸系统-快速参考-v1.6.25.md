# ?? 立绘面板触摸系统 - 快速参考卡 v1.6.25

## ?? 快速启用

```
ESC → Mod设置 → The Second Seat → 勾选"使用立绘模式" → 返回游戏
```

---

## ?? 触摸互动流程

```
1. 鼠标移动到画面左侧立绘上
   ↓
2. 保持1秒（观察底部进度条）
   ↓
3. 触摸模式激活！（疑惑表情 + 边框闪烁）
   ↓
4. 移动鼠标与她互动：
   ├─ 慢速移动：每3次触发可爱表情
   └─ 快速移动：触发害羞表情
   ↓
5. 连续移动10次：连击奖励（好感度+5）
   ↓
6. 鼠标离开：退出触摸模式
```

---

## ?? 表情触发表

| 互动方式 | 触发表情 | 浮动文字 | 好感度 |
|---------|---------|---------|--------|
| 激活触摸模式 | Confused | "(?ω?)?" | 0 |
| 慢速移动×3 | Happy/Surprised/Smug/Shy | 随机可爱表情 | 0 |
| 快速移动 | Shy | "(/ω＼)" | 0 |
| 连击×10 | Happy/Smug | "(*^^*)" | **+5** |

---

## ?? 视觉效果

### 悬停进度条
- 位置：立绘底部
- 尺寸：358×8像素
- 颜色：蓝色→金色渐变

### 触摸模式指示器
- 边框：金色闪烁（3像素）
- 计数器：右下角（×1, ×2, ...）

### 边框闪烁
- 激活时：慢速单次（1秒）
- 连击时：快速三次（0.15秒×3）

---

## ? 快速刷好感度

```
1. 悬停1秒激活触摸模式
2. 快速左右移动鼠标10次
3. 获得好感度+5
4. 鼠标离开，等待30秒
5. 重复步骤1-4

效率：约每分钟 +10 好感度
```

---

## ?? DevMode 日志

```
[FullBodyPortraitPanel] 触摸模式激活
[FullBodyPortraitPanel] ? Layered portrait loaded: Sideria_Default (Confused)
[FullBodyPortraitPanel] 触摸模式取消
```

---

## ?? 常见问题

### 浮动文字不显示
**原因**：没有激活的地图  
**解决**：在游戏内使用（需要地图加载）  
**影响**：触摸功能正常，只是看不到表情符号

### 鼠标移动检测延迟
**原因**：触摸冷却机制（0.3秒）  
**影响**：轻微延迟，正常现象

---

## ?? 好感度对比

| 互动方式 | 好感度增加 | 频率 |
|---------|-----------|------|
| AI按钮触摸 | +3 | 约每30秒 |
| **立绘面板触摸** | **+5** | 约每30秒 |
| 对话互动 | +1~+2 | 根据内容 |
| 命令执行 | +2 | 根据命令 |

**立绘面板触摸是最高效的好感度增加方式！**

---

## ?? 触摸参数

| 参数 | 值 | 说明 |
|-----|---|------|
| 悬停激活时间 | 1秒 | 鼠标保持不动的时间 |
| 触摸冷却时间 | 0.3秒 | 两次触摸之间的最小间隔 |
| 连击触发次数 | 10次 | 触发连击奖励的移动次数 |
| 快速移动阈值 | 500像素/秒 | 触发害羞表情的移动速度 |
| 移动检测距离 | 5像素 | 鼠标移动超过此距离才触发 |

---

## ?? 表情种类

```
触摸模式激活：
- Confused（疑惑）

慢速移动：
- Happy（开心）
- Surprised（惊讶）
- Smug（得意）
- Shy（害羞）

快速移动：
- Shy（害羞）

连击奖励：
- Happy（开心，70%）
- Smug（得意，30%）
```

---

## ?? 代码位置

**文件**：`Source/TheSecondSeat/UI/FullBodyPortraitPanel.cs`

**关键方法**：
- `HandleHoverAndTouch()` - 触摸检测
- `ActivateTouchMode()` - 激活触摸模式
- `OnTouchMove()` - 处理鼠标移动
- `OnTouchCombo()` - 连击奖励

---

## ?? 一键启用命令

```powershell
# 快速编译并部署
cd "C:\Users\Administrator\Desktop\rim mod\The Second Seat"
dotnet build -c Release --nologo
Copy-Item "Source\TheSecondSeat\bin\Release\net472\TheSecondSeat.dll" `
    "D:\steam\steamapps\common\RimWorld\Mods\TheSecondSeat\1.6\Assemblies\" -Force
```

---

**版本**：v1.6.25  
**更新时间**：2025-01-XX  
**状态**：? 已部署

**享受与她的互动吧！** ???
