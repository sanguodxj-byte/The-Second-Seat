# The Second Seat - 功能验证快速清单 v1.6.17

## ? 编译与部署验证

- [x] **编译成功**: 0个警告，0个错误
- [x] **DLL大小**: 447 KB（正常）
- [x] **DLL部署**: 已复制到 `D:\steam\steamapps\common\RimWorld\Mods\TheSecondSeat\1.6\Assemblies\`
- [x] **Defs文件**: 2个XML文件已部署
- [x] **纹理文件**: 168个文件已部署
- [x] **语言文件**: 3个文件已部署

---

## ?? 人格系统验证

### 用户引导人格生成 ? 重点测试
- [ ] **打开生成界面**: 设置菜单 → 生成人格
- [ ] **人格名称输入框**: 显示正常，可以输入文字
- [ ] **人格描述输入框**: 显示正常，支持多行输入
- [ ] **生成按钮**: 点击后能创建人格
- [ ] **取消按钮**: 点击后关闭窗口
- [ ] **查看示例按钮**: 显示人格示例

### 人格切换
- [ ] **人格列表**: 设置菜单 → 人格选择
- [ ] **Sideria人格**: 傲娇型守护者
- [ ] **Cassandra人格**: 平衡型管理者
- [ ] **切换功能**: 可以切换不同人格

---

## ?? 对话系统验证

### 对话窗口
- [ ] **AI按钮**: 屏幕左上角显示AI按钮
- [ ] **左键点击**: 打开对话窗口
- [ ] **右键点击**: 快速对话窗口
- [ ] **输入框**: 可以输入文字
- [ ] **回车发送**: Enter键发送消息
- [ ] **ESC关闭**: ESC键关闭窗口（不阻塞游戏）

### AI回复
- [ ] **中文回复**: AI用简体中文回复
- [ ] **JSON格式**: AI输出有效的JSON
- [ ] **对话内容**: 包含 `dialogue` 字段
- [ ] **动作描述**: 包含 `(动作)` 格式
- [ ] **好感度影响**: 高好感度时语气温柔，低好感度时冷淡

---

## ?? 表情系统验证

### 表情切换
- [ ] **Neutral**: 中性表情
- [ ] **Happy**: 开心表情
- [ ] **Sad**: 难过表情
- [ ] **Angry**: 生气表情
- [ ] **Surprised**: 惊讶表情
- [ ] **Worried**: 担心表情
- [ ] **Smug**: 得意表情
- [ ] **Disappointed**: 失望表情
- [ ] **Thoughtful**: 思考表情
- [ ] **Annoyed**: 烦恼表情
- [ ] **Playful**: 俏皮表情
- [ ] **Shy**: 害羞表情
- [ ] **Confused**: 疑惑表情

### 表情动画
- [ ] **平滑过渡**: 表情切换有过渡动画
- [ ] **呼吸动画**: ?? 当前被简化（立绘不会上下浮动）

---

## ?? TTS语音验证

### 语音播放
- [ ] **Edge TTS**: 配置API后能播放语音
- [ ] **语音质量**: MP3 192kbps高质量音频
- [ ] **音调调整**: -200Hz ~ +200Hz
- [ ] **速度调整**: -50% ~ +50%
- [ ] **播放状态**: 显示语音播放进度

---

## ?? AI功能验证

### LLM集成
- [ ] **Gemini API**: 配置后能正常调用
- [ ] **OpenAI API**: 配置后能正常调用
- [ ] **模型选择**: 可以切换不同模型

### 多模态分析
- [ ] **图像分析**: 上传立绘后能分析
- [ ] **人格生成**: 根据图像生成人格描述
- [ ] **视觉元素**: 提取颜色、氛围等特征

---

## ?? 命令系统验证

### 批量操作
- [ ] **批量收获**: "帮我收获所有作物"
- [ ] **批量装备**: "给殖民者装备最好的武器"
- [ ] **优先修理**: "修理损坏的建筑"
- [ ] **紧急撤退**: "让所有人撤退"

---

## ?? 好感度系统验证

### 好感度变化
- [ ] **友善对话**: 好感度上升
- [ ] **批评决策**: 好感度下降
- [ ] **好感度显示**: 设置菜单中显示当前好感度
- [ ] **情感变化**: 好感度影响AI语气和行为

---

## ?? 游戏集成验证

### UI显示
- [ ] **AI按钮**: 左上角显示
- [ ] **按钮状态**: Ready/Processing/Error状态切换
- [ ] **按钮动画**: 悬停时有动画效果
- [ ] **状态面板**: 显示殖民地状态

### 设置菜单
- [ ] **Mod设置**: 选项 → Mod设置 → The Second Seat
- [ ] **API配置**: 可以配置Gemini/OpenAI API
- [ ] **人格选择**: 可以选择不同人格
- [ ] **难度模式**: 可以切换助手/对手模式
- [ ] **TTS设置**: 可以配置语音参数

---

## ?? 已知问题确认

### 已简化功能
- [ ] **呼吸动画**: 确认立绘不会上下浮动（正常）
- [ ] **中文注释乱码**: 代码中有问号但不影响功能（正常）

### 需要配置的功能
- [ ] **AI对话**: 需要配置Gemini/OpenAI API密钥
- [ ] **TTS语音**: Edge TTS无需配置，本地TTS需配置
- [ ] **多模态分析**: 需要配置支持Vision的API

---

## ?? 测试优先级

### P0 - 必须测试（核心功能）
1. ? **编译与部署**: 已完成
2. ? **用户引导人格生成**: 输入框显示
3. ? **对话系统**: AI能用中文回复
4. ? **表情切换**: 13种表情能切换
5. ? **好感度系统**: 好感度影响语气

### P1 - 重要测试（高级功能）
6. **TTS语音**: 配置后能播放
7. **多模态分析**: 配置后能分析图像
8. **命令执行**: 批量操作能执行
9. **人格切换**: 可以切换不同人格

### P2 - 可选测试（辅助功能）
10. **呼吸动画**: 确认被简化（返回0）
11. **UI动画**: 按钮动画效果
12. **自主行为**: AI自主决策

---

## ?? 测试记录模板

```markdown
## 测试日期: 2025-01-XX
## 测试人员: [你的名字]
## 游戏版本: RimWorld 1.5/1.6

### P0 测试结果
- [ ] 用户引导人格生成: ?/?
  - 输入框显示: ?/?
  - 生成逻辑: ?/?
  - 问题描述: [如有问题请描述]

- [ ] 对话系统: ?/?
  - 中文回复: ?/?
  - JSON格式: ?/?
  - 问题描述: [如有问题请描述]

### P1 测试结果
[记录测试结果]

### P2 测试结果
[记录测试结果]

### 发现的问题
1. [问题描述]
2. [问题描述]

### 总结
[测试总结]
```

---

## ?? 测试完成标准

### 必须通过的测试
- ? 编译成功（0个错误）
- ? DLL已部署
- ? 用户引导人格生成界面正常显示
- ? AI能用中文回复
- ? 表情能正常切换

### 达到此标准即可认为功能完整！

---

**测试版本**: v1.6.17  
**测试状态**: 待测试  
**下一步**: 启动游戏并测试所有功能  
**预期结果**: 所有P0功能通过测试
