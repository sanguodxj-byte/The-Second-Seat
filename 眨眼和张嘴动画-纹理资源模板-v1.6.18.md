# 眨眼和张嘴动画 - 纹理资源模板 v1.6.18

## ?? 文件结构

```
Textures/UI/Narrators/9x16/Layered/Sideria/
├── base_body.png              ← 身体层（1024x1574, 必需）
├── face_neutral.png           ← 默认表情（1024x1574, 必需）
├── face_happy.png             ← 开心表情
├── face_sad.png               ← 悲伤表情
├── face_angry.png             ← 生气表情
├── outfit_default.png         ← 默认服装（可选）
│
├── eyes_open.png              ← ? 新增：睁眼层（1024x1574）
├── eyes_half.png              ← ? 新增：半闭眼层（1024x1574）
├── eyes_closed.png            ← ? 新增：闭眼层（1024x1574）
│
├── mouth_closed.png           ← ? 新增：闭嘴层（1024x1574）
├── mouth_smile.png            ← ? 新增：微笑层（1024x1574）
├── mouth_open_small.png       ← ? 新增：小张嘴层（1024x1574）
├── mouth_open_wide.png        ← ? 新增：大张嘴层（1024x1574）
└── mouth_frown.png            ← ? 新增：皱眉层（可选，1024x1574）
```

---

## ?? 纹理制作规范

### **通用要求**
- **尺寸：** 1024×1574 像素（统一立绘格式）
- **格式：** PNG（支持透明通道）
- **背景：** 完全透明（RGB: 0, 0, 0, A: 0）
- **分辨率：** 300 DPI（推荐）

### **眼睛层制作要点**

#### 1. **eyes_open.png** （睁眼层）
- **内容：** 只包含睁开的眼睛
- **位置：** 与 `face_neutral.png` 中的眼睛位置完全对齐
- **细节：** 包含瞳孔、高光、眼睫毛
- **透明区域：** 除眼睛外的所有区域

**制作步骤：**
```
1. 从 face_neutral.png 复制眼睛区域
2. 删除其他部分（保留透明）
3. 增强眼睛细节（高光、眼睑阴影）
4. 保存为 PNG（透明背景）
```

#### 2. **eyes_half.png** （半闭眼层）
- **内容：** 眼睛半闭合状态
- **位置：** 与 `eyes_open.png` 对齐
- **细节：** 上眼睑下垂约 40%
- **用途：** 眨眼动画过渡帧

**绘制技巧：**
- 复制 `eyes_open.png`
- 上眼睑向下移动到瞳孔中心
- 保持眼睛形状自然

#### 3. **eyes_closed.png** （闭眼层）
- **内容：** 眼睛完全闭合
- **位置：** 与 `eyes_open.png` 对齐
- **细节：** 只显示眼睑和睫毛
- **用途：** 眨眼动画中间帧

**绘制技巧：**
- 上下眼睑合拢
- 保留睫毛和眼睑阴影
- 可添加闭眼时的皱纹细节

---

### **嘴巴层制作要点**

#### 1. **mouth_closed.png** （闭嘴层）
- **内容：** 嘴巴闭合
- **位置：** 与 `face_neutral.png` 中的嘴巴位置对齐
- **用途：** 默认状态、不说话时

#### 2. **mouth_smile.png** （微笑层）
- **内容：** 嘴角上扬的微笑
- **位置：** 与 `mouth_closed.png` 对齐
- **用途：** Happy/Excited 表情时

#### 3. **mouth_open_small.png** （小张嘴层）
- **内容：** 嘴巴微微张开
- **位置：** 与 `mouth_closed.png` 对齐
- **用途：** 说话时的轻度开口

**参数：**
- 开口高度：约 5-8 像素
- 可见牙齿：部分可见

#### 4. **mouth_open_wide.png** （大张嘴层）
- **内容：** 嘴巴大幅张开
- **位置：** 与 `mouth_closed.png` 对齐
- **用途：** 惊讶表情、说话时的强调音节

**参数：**
- 开口高度：约 15-20 像素
- 可见牙齿：完全可见
- 可添加舌头细节

#### 5. **mouth_frown.png** （皱眉层，可选）
- **内容：** 嘴角向下的不悦表情
- **位置：** 与 `mouth_closed.png` 对齐
- **用途：** Sad/Angry 表情时

---

## ??? 图层对齐指南

### **关键原则**
> **所有动画层必须与基础立绘的对应部位像素级对齐！**

### **对齐检查清单**
- [ ] 眼睛层与 `face_neutral.png` 中的眼睛位置完全重合
- [ ] 嘴巴层与 `face_neutral.png` 中的嘴巴位置完全重合
- [ ] 使用 Photoshop/GIMP 的图层对齐工具
- [ ] 在多个表情文件中测试对齐效果

### **对齐工具推荐**
1. **Photoshop**
   - 使用"标尺"和"参考线"
   - 图层锁定位置后复制

2. **GIMP**
   - 使用"对齐工具"（Shift+Q）
   - 开启"吸附到参考线"

3. **Krita**
   - 使用"辅助线"功能
   - 图层管理器锁定位置

---

## ?? 尺寸参考

### **眼睛层尺寸**
- **单眼宽度：** 约 80-120 像素
- **单眼高度：** 约 40-60 像素
- **双眼间距：** 约 150-200 像素
- **垂直位置：** 距顶部约 380-450 像素

### **嘴巴层尺寸**
- **宽度：** 约 100-150 像素
- **高度：** 约 30-50 像素（闭合）
- **高度：** 约 50-80 像素（大张）
- **垂直位置：** 距顶部约 650-750 像素

---

## ?? 表情映射表

| 表情类型 | 眼睛层 | 嘴巴层 |
|---------|--------|--------|
| Neutral | eyes_open | mouth_closed |
| Happy | eyes_open | mouth_smile |
| Sad | eyes_open | mouth_frown |
| Angry | eyes_open | mouth_closed |
| Surprised | eyes_open | mouth_open_wide |
| Confused | eyes_open | mouth_open_small |
| Smug | eyes_half | mouth_smile |
| Shy | eyes_half | mouth_closed |

---

## ??? 制作工具推荐

### **图像编辑软件**
1. **Photoshop** - 专业首选
2. **GIMP** - 免费开源
3. **Krita** - 专业绘画工具
4. **Clip Studio Paint** - 漫画/插画专用

### **AI 辅助工具**
1. **Stable Diffusion** - 生成基础素材
2. **Controlnet** - 精确控制姿态
3. **Segment Anything** - 自动分离图层

---

## ?? 导出设置

### **Photoshop 导出**
```
文件 → 导出 → 导出为...
- 格式：PNG
- 透明度：勾选
- 尺寸：1024×1574
- 质量：100%
- 元数据：最少
```

### **GIMP 导出**
```
文件 → 导出为...
- 格式：PNG
- 压缩级别：9
- 保存背景色：取消勾选
- 保存 Gamma：取消勾选
```

---

## ? 质量检查清单

### **视觉检查**
- [ ] 所有层透明区域正确（无白边/黑边）
- [ ] 眼睛/嘴巴细节清晰（无模糊）
- [ ] 颜色与基础立绘一致
- [ ] 光影方向与基础立绘匹配

### **技术检查**
- [ ] 文件大小 < 2MB
- [ ] PNG 格式，Alpha 通道完整
- [ ] 尺寸精确 1024×1574 像素
- [ ] 文件命名正确（小写，无空格）

### **动画检查**
- [ ] 眨眼序列流畅（open → half → closed → half → open）
- [ ] 张嘴过渡自然（closed → small → wide）
- [ ] 位置对齐无偏移
- [ ] 与表情系统配合无异常

---

## ?? 动画预览工具

### **简易预览方法**
1. 在 Photoshop 中创建"时间轴动画"
2. 导入所有眨眼/嘴巴帧
3. 设置帧率：10 FPS
4. 播放预览效果

### **游戏内测试**
1. 替换纹理文件
2. 重启 RimWorld
3. 启用 DevMode
4. 查看控制台日志确认加载
5. 观察 AI 按钮/对话窗口的动画效果

---

## ?? 相关文档

- [分层立绘系统-快速参考.md](分层立绘系统-快速参考.md)
- [呼吸动画与分层立绘-快速参考-v1.6.18.md](呼吸动画与分层立绘-快速参考-v1.6.18.md)
- [LayerDefinition.cs](Source/TheSecondSeat/PersonaGeneration/LayerDefinition.cs)

---

**版本：** v1.6.18 | **创建日期：** 2025-01-XX
