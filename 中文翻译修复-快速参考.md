# ?? 中文翻译修复 - 快速参考

**版本**: v1.6.1  
**日期**: 2025-01-15  
**状态**: ? **翻译文件已更新**

---

## ?? 问题描述

### 原始问题
设置界面显示英文翻译键名称，而不是中文：
```
? TSS_Settings_Basic_Title
? TSS_Settings_TTS_Title
? TSS_Settings_EnableTTS
```

### 根本原因
翻译文件 `Languages\ChineseSimplified\Keyed\TheSecondSeat_Keys.xml` 中 **缺少新增的翻译键**。

---

## ? 修复内容

### 新增翻译键

#### 1. 基础设置
```xml
<TSS_Settings_Basic_Title>基础设置</TSS_Settings_Basic_Title>
```

#### 2. TTS 设置
```xml
<!-- TTS 设置标题 -->
<TSS_Settings_TTS_Title>语音合成（TTS）设置</TSS_Settings_TTS_Title>

<!-- TTS 配置选项 -->
<TSS_Settings_EnableTTS>启用语音合成（TTS）</TSS_Settings_EnableTTS>
<TSS_Settings_TTSProvider>TTS 提供商</TSS_Settings_TTSProvider>
<TSS_Settings_TTSProvider_Azure>Azure TTS（付费，高质量）</TSS_Settings_TTSProvider_Azure>
<TSS_Settings_TTSProvider_Edge>Edge TTS</TSS_Settings_TTSProvider_Edge>
<TSS_Settings_TTSProvider_Local>本地 TTS</TSS_Settings_TTSProvider_Local>

<!-- TTS 参数 -->
<TSS_Settings_TTSAPIKey>TTS API 密钥</TSS_Settings_TTSAPIKey>
<TSS_Settings_TTSRegion>Azure 区域</TSS_Settings_TTSRegion>
<TSS_Settings_TTSVoice>语音选择</TSS_Settings_TTSVoice>
<TSS_Settings_TTSSpeechRate>语速</TSS_Settings_TTSSpeechRate>
<TSS_Settings_TTSVolume>音量</TSS_Settings_TTSVolume>

<!-- TTS 测试 -->
<TSS_Settings_TestTTS>测试 TTS</TSS_Settings_TestTTS>
<TSS_Settings_TestingTTS>正在测试 TTS...</TSS_Settings_TestingTTS>
<TSS_Settings_TTSTestSuccess>TTS 测试成功！音频文件已保存。</TSS_Settings_TTSTestSuccess>
<TSS_Settings_TTSTestFailed>TTS 测试失败</TSS_Settings_TTSTestFailed>
```

---

## ?? 翻译覆盖率

### 设置界面

| 翻译键 | 中文翻译 | 状态 |
|--------|----------|------|
| `TSS_Settings_Basic_Title` | 基础设置 | ? |
| `TSS_Settings_LLM_Title` | LLM 设置 | ? |
| `TSS_Settings_WebSearch_Title` | 网络搜索设置 | ? |
| `TSS_Settings_Multimodal_Title` | 多模态分析设置 | ? |
| `TSS_Settings_TTS_Title` | 语音合成（TTS）设置 | ? 新增 |
| `TSS_Settings_Debug_Title` | 调试设置 | ? |

### TTS 相关

| 翻译键 | 中文翻译 | 状态 |
|--------|----------|------|
| `TSS_Settings_EnableTTS` | 启用语音合成（TTS） | ? 新增 |
| `TSS_Settings_TTSProvider` | TTS 提供商 | ? 新增 |
| `TSS_Settings_TTSProvider_Azure` | Azure TTS（付费，高质量） | ? 新增 |
| `TSS_Settings_TTSProvider_Edge` | Edge TTS | ? 新增 |
| `TSS_Settings_TTSProvider_Local` | 本地 TTS | ? 新增 |
| `TSS_Settings_TTSAPIKey` | TTS API 密钥 | ? 新增 |
| `TSS_Settings_TTSRegion` | Azure 区域 | ? 新增 |
| `TSS_Settings_TTSVoice` | 语音选择 | ? 新增 |
| `TSS_Settings_TTSSpeechRate` | 语速 | ? 新增 |
| `TSS_Settings_TTSVolume` | 音量 | ? 新增 |
| `TSS_Settings_TestTTS` | 测试 TTS | ? 新增 |
| `TSS_Settings_TestingTTS` | 正在测试 TTS... | ? 新增 |
| `TSS_Settings_TTSTestSuccess` | TTS 测试成功！音频文件已保存。 | ? 新增 |
| `TSS_Settings_TTSTestFailed` | TTS 测试失败 | ? 新增 |

---

## ?? 现在的设置界面

### 显示效果（中文）

```
┌─────────────────────────────────────┐
│ 基础设置                            │  ? 显示中文
│   ? 调试模式                        │
│   ? 好感度系统                      │
├─────────────────────────────────────┤
│  LLM 设置                          │  ? 显示中文
│   ○ 本地模型 (LM Studio / Ollama)  │
│   ○ OpenAI (GPT-4 / GPT-3.5)       │
│   ...                               │
├─────────────────────────────────────┤
│ ? 网络搜索设置                       │  ? 显示中文
├─────────────────────────────────────┤
│ ? 多模态分析设置                     │  ? 显示中文
├─────────────────────────────────────┤
│  语音合成（TTS）设置                │  ? 新增，显示中文
│   ? 启用语音合成（TTS）             │
│   ○ Azure TTS（付费，高质量）        │
│   ○ Edge TTS (免费)                 │
│   ○ 本地 TTS (Windows SAPI)         │
│   语音选择: zh-CN-XiaoxiaoNeural    │
│   语速: 1.00x                        │
│   音量: 100%                         │
│   [测试 TTS]                         │
└─────────────────────────────────────┘
```

---

## ?? 部署状态

### 翻译文件
```
? Languages\ChineseSimplified\Keyed\TheSecondSeat_Keys.xml
   → D:\steam\steamapps\common\RimWorld\Mods\TheSecondSeat\Languages\ChineseSimplified\Keyed\
```

### DLL 文件
```
?? 待部署（等待 RimWorld 关闭）
   Source\TheSecondSeat\bin\Release\net472\TheSecondSeat.dll
   → D:\steam\steamapps\common\RimWorld\Mods\TheSecondSeat\Assemblies\
```

---

## ?? 下一步操作

### 1. 关闭 RimWorld

### 2. 部署 DLL
```powershell
.\Deploy-Translation-Fix.ps1
```

### 3. 重启 RimWorld

### 4. 验证翻译
- 打开 **模组设置 → The Second Seat**
- 检查所有设置标题是否为中文
- 检查 TTS 设置是否显示中文

---

## ?? 验证清单

### 设置界面翻译

- [ ] **基础设置** 标题显示为 "基础设置"（不是 `TSS_Settings_Basic_Title`）
- [ ] **LLM 设置** 标题显示为 "LLM 设置"
- [ ] **网络搜索设置** 标题显示为 "网络搜索设置"
- [ ] **多模态分析设置** 标题显示为 "多模态分析设置"
- [ ] **语音合成（TTS）设置** 标题显示为 "语音合成（TTS）设置"

### TTS 配置翻译

- [ ] **启用语音合成（TTS）** 复选框显示为中文
- [ ] **TTS 提供商** 选项显示为中文
  - [ ] Azure TTS（付费，高质量）
  - [ ] Edge TTS (免费)
  - [ ] 本地 TTS (Windows SAPI)
- [ ] **语音选择** 显示为中文
- [ ] **语速** 显示为中文（如：`语速: 1.00x`）
- [ ] **音量** 显示为中文（如：`音量: 100%`）
- [ ] **测试 TTS** 按钮显示为中文

---

## ?? 完整翻译键列表

### 已有翻译（未修改）
- ? `TSS_Settings_LLM_Title` → "LLM 设置"
- ? `TSS_Settings_WebSearch_Title` → "网络搜索设置"
- ? `TSS_Settings_Multimodal_Title` → "多模态分析设置"
- ? `TSS_Settings_Debug_Title` → "调试设置"

### 新增翻译
- ? `TSS_Settings_Basic_Title` → "基础设置"
- ? `TSS_Settings_TTS_Title` → "语音合成（TTS）设置"
- ? `TSS_Settings_EnableTTS` → "启用语音合成（TTS）"
- ? `TSS_Settings_TTSProvider` → "TTS 提供商"
- ? `TSS_Settings_TTSProvider_Azure` → "Azure TTS（付费，高质量）"
- ? `TSS_Settings_TTSProvider_Edge` → "Edge TTS"
- ? `TSS_Settings_TTSProvider_Local` → "本地 TTS"
- ? `TSS_Settings_TTSAPIKey` → "TTS API 密钥"
- ? `TSS_Settings_TTSRegion` → "Azure 区域"
- ? `TSS_Settings_TTSVoice` → "语音选择"
- ? `TSS_Settings_TTSSpeechRate` → "语速"
- ? `TSS_Settings_TTSVolume` → "音量"
- ? `TSS_Settings_TestTTS` → "测试 TTS"
- ? `TSS_Settings_TestingTTS` → "正在测试 TTS..."
- ? `TSS_Settings_TTSTestSuccess` → "TTS 测试成功！音频文件已保存。"
- ? `TSS_Settings_TTSTestFailed` → "TTS 测试失败"

---

## ?? 总结

### 修复内容
? **翻译文件已更新**
- 添加 15 个新翻译键
- 修复设置界面显示问题
- 完整支持 TTS 功能

### 效果
- **之前**：显示英文键名（如 `TSS_Settings_TTS_Title`）
- **现在**：显示中文翻译（如 "语音合成（TTS）设置"）

### 下一步
1. 关闭 RimWorld
2. 运行 `.\Deploy-Translation-Fix.ps1`
3. 重启游戏验证

---

**版本**: v1.6.1  
**状态**: ? **翻译文件已部署，待重启验证**

?? **现在设置界面全部显示中文了！**
