<?xml version="1.0" encoding="utf-8" ?>
<Defs>
  <!-- ============================================== -->
  <!-- Sideria 主动技能定义 -->
  <!-- ============================================== -->
  
  <!-- 灾厄摔掷 Calamity Throw - 强化版 Tactical Throws -->
  <AbilityDef>
    <defName>Sideria_CalamityThrow</defName>
    <label>calamity throw</label>
    <description>Sideria seizes the target with overwhelming force, bypassing all resistance. The grabbed target can then be thrown at enemies or slammed into the ground with devastating power, dealing double the normal damage.</description>
    <iconPath>UI/Abilities/CalamityThrow</iconPath>
    <cooldownTicksRange>300</cooldownTicksRange>
    <displayGizmoWhileUndrafted>false</displayGizmoWhileUndrafted>
    <disableGizmoWhileUndrafted>true</disableGizmoWhileUndrafted>
    <canUseAoeToGetTargets>false</canUseAoeToGetTargets>
    <verbProperties>
      <verbClass>Verb_CastAbility</verbClass>
      <range>1.9</range>
      <warmupTime>0.5</warmupTime>
      <targetParams>
        <canTargetSelf>false</canTargetSelf>
        <canTargetAnimals>true</canTargetAnimals>
        <canTargetHumans>true</canTargetHumans>
        <canTargetMechs>true</canTargetMechs>
        <canTargetBuildings>false</canTargetBuildings>
        <canTargetLocations>false</canTargetLocations>
      </targetParams>
    </verbProperties>
    <comps>
      <li Class="TheSecondSeat.CompProperties_AbilityEffect_CalamityThrow">
        <damageMultiplier>2.0</damageMultiplier>
        <bypassGrappleCheck>true</bypassGrappleCheck>
        <holdJobDefName>Sideria_CalamityHold</holdJobDefName>
        <damageMultiplierHediffDefName>Sideria_CalamityThrowBonus</damageMultiplierHediffDefName>
      </li>
    </comps>
  </AbilityDef>

  <!-- 猩红绽放 Crimson Bloom - 层数积累后摧毁核心部件 -->
  <AbilityDef>
    <defName>Sideria_CrimsonBloom</defName>
    <label>crimson bloom</label>
    <description>Sideria marks the target with crimson energy. Each attack against the marked target accumulates a layer of the bloom. When three layers are reached, the accumulated energy erupts, instantly destroying a vital organ of the target.</description>
    <iconPath>UI/Abilities/CrimsonBloom</iconPath>
    <cooldownTicksRange>180</cooldownTicksRange>
    <displayGizmoWhileUndrafted>false</displayGizmoWhileUndrafted>
    <disableGizmoWhileUndrafted>true</disableGizmoWhileUndrafted>
    <canUseAoeToGetTargets>false</canUseAoeToGetTargets>
    <verbProperties>
      <verbClass>Verb_CastAbility</verbClass>
      <range>15</range>
      <warmupTime>1.0</warmupTime>
      <targetParams>
        <canTargetSelf>false</canTargetSelf>
        <canTargetAnimals>true</canTargetAnimals>
        <canTargetHumans>true</canTargetHumans>
        <canTargetMechs>true</canTargetMechs>
        <canTargetBuildings>false</canTargetBuildings>
        <canTargetLocations>false</canTargetLocations>
      </targetParams>
    </verbProperties>
    <comps>
      <li Class="TheSecondSeat.CompProperties_AbilityCrimsonBloom">
        <stacksToBloom>3</stacksToBloom>
        <markDuration>30</markDuration>
        <markHediffDefName>Sideria_CrimsonBloomMark</markHediffDefName>
      </li>
    </comps>
  </AbilityDef>

  <!-- 唤龙之门·血刺 Dragon Gate: BloodThorn - 召唤血刺灵龙 -->
  <AbilityDef>
    <defName>Sideria_DragonGate_BloodThorn</defName>
    <label>dragon gate: bloodthorn</label>
    <description>Sideria opens a gateway to the spirit realm, summoning the BloodThorn Dragon - a fearsome spirit dragon wreathed in thorns of crystallized blood. This dragon excels at tearing through enemies with its deadly thorned attacks.</description>
    <iconPath>UI/Abilities/DragonGate</iconPath>
    <cooldownTicksRange>15000</cooldownTicksRange>
    <displayGizmoWhileUndrafted>false</displayGizmoWhileUndrafted>
    <disableGizmoWhileUndrafted>true</disableGizmoWhileUndrafted>
    <canUseAoeToGetTargets>false</canUseAoeToGetTargets>
    <verbProperties>
      <verbClass>Verb_CastAbility</verbClass>
      <range>5</range>
      <warmupTime>2.0</warmupTime>
      <targetParams>
        <canTargetSelf>false</canTargetSelf>
        <canTargetAnimals>false</canTargetAnimals>
        <canTargetHumans>false</canTargetHumans>
        <canTargetMechs>false</canTargetMechs>
        <canTargetBuildings>false</canTargetBuildings>
        <canTargetLocations>true</canTargetLocations>
      </targetParams>
    </verbProperties>
    <comps>
      <li Class="TheSecondSeat.CompProperties_AbilityDragonGate">
        <dragonDurationTicks>15000</dragonDurationTicks>
        <summonRadius>5</summonRadius>
        <dragonKindDefNames>
          <li>Sideria_SpiritDragon_BloodThorn_Kind</li>
        </dragonKindDefNames>
        <dissipationHediffDefName>Sideria_SpiritDragonDissipation</dissipationHediffDefName>
      </li>
    </comps>
  </AbilityDef>

  <!-- 唤龙之门·光辉 Dragon Gate: Radiant - 召唤光辉灵龙 -->
  <AbilityDef>
    <defName>Sideria_DragonGate_Radiant</defName>
    <label>dragon gate: radiant</label>
    <description>Sideria opens a gateway to the spirit realm, summoning the Radiant Dragon - a majestic spirit dragon that blazes with holy light. This dragon provides support through its radiant presence and powerful light-based attacks.</description>
    <iconPath>UI/Abilities/DragonGate</iconPath>
    <cooldownTicksRange>15000</cooldownTicksRange>
    <displayGizmoWhileUndrafted>false</displayGizmoWhileUndrafted>
    <disableGizmoWhileUndrafted>true</disableGizmoWhileUndrafted>
    <canUseAoeToGetTargets>false</canUseAoeToGetTargets>
    <verbProperties>
      <verbClass>Verb_CastAbility</verbClass>
      <range>5</range>
      <warmupTime>2.0</warmupTime>
      <targetParams>
        <canTargetSelf>false</canTargetSelf>
        <canTargetAnimals>false</canTargetAnimals>
        <canTargetHumans>false</canTargetHumans>
        <canTargetMechs>false</canTargetMechs>
        <canTargetBuildings>false</canTargetBuildings>
        <canTargetLocations>true</canTargetLocations>
      </targetParams>
    </verbProperties>
    <comps>
      <li Class="TheSecondSeat.CompProperties_AbilityDragonGate">
        <dragonDurationTicks>15000</dragonDurationTicks>
        <summonRadius>5</summonRadius>
        <dragonKindDefNames>
          <li>Sideria_SpiritDragon_Radiant_Kind</li>
        </dragonKindDefNames>
        <dissipationHediffDefName>Sideria_SpiritDragonDissipation</dissipationHediffDefName>
      </li>
    </comps>
  </AbilityDef>

  <!-- 唤龙之门·机甲 Dragon Gate: Mecha - 召唤机甲灵龙 -->
  <AbilityDef>
    <defName>Sideria_DragonGate_Mecha</defName>
    <label>dragon gate: mecha</label>
    <description>Sideria opens a gateway to the spirit realm, summoning the Mecha Dragon - a powerful spirit dragon encased in mechanoid armor. This dragon combines spirit energy with mechanoid technology for devastating firepower.</description>
    <iconPath>UI/Abilities/DragonGate</iconPath>
    <cooldownTicksRange>15000</cooldownTicksRange>
    <displayGizmoWhileUndrafted>false</displayGizmoWhileUndrafted>
    <disableGizmoWhileUndrafted>true</disableGizmoWhileUndrafted>
    <canUseAoeToGetTargets>false</canUseAoeToGetTargets>
    <verbProperties>
      <verbClass>Verb_CastAbility</verbClass>
      <range>5</range>
      <warmupTime>2.0</warmupTime>
      <targetParams>
        <canTargetSelf>false</canTargetSelf>
        <canTargetAnimals>false</canTargetAnimals>
        <canTargetHumans>false</canTargetHumans>
        <canTargetMechs>false</canTargetMechs>
        <canTargetBuildings>false</canTargetBuildings>
        <canTargetLocations>true</canTargetLocations>
      </targetParams>
    </verbProperties>
    <comps>
      <li Class="TheSecondSeat.CompProperties_AbilityDragonGate">
        <dragonDurationTicks>15000</dragonDurationTicks>
        <summonRadius>5</summonRadius>
        <dragonKindDefNames>
          <li>Sideria_SpiritDragon_Mecha_Kind</li>
        </dragonKindDefNames>
        <dissipationHediffDefName>Sideria_SpiritDragonDissipation</dissipationHediffDefName>
      </li>
    </comps>
  </AbilityDef>

  <!-- ============================================== -->
  <!-- 猩红绽放标记 Hediff 定义 -->
  <!-- ============================================== -->
  <HediffDef>
    <defName>Sideria_CrimsonBloomMark</defName>
    <label>crimson bloom mark</label>
    <description>This creature has been marked by Sideria's crimson energy. Each attack from Sideria accumulates power within the mark. When three layers are reached, the mark erupts, destroying a vital organ.</description>
    <hediffClass>HediffWithComps</hediffClass>
    <isBad>true</isBad>
    <tendable>false</tendable>
    <makesSickThought>false</makesSickThought>
    <makesAlert>false</makesAlert>
    <initialSeverity>0.33</initialSeverity>
    <minSeverity>0</minSeverity>
    <maxSeverity>1.0</maxSeverity>
    <stages>
      <li>
        <label>one layer</label>
        <minSeverity>0.01</minSeverity>
        <painOffset>0.05</painOffset>
      </li>
      <li>
        <label>two layers</label>
        <minSeverity>0.34</minSeverity>
        <painOffset>0.10</painOffset>
      </li>
      <li>
        <label>three layers</label>
        <minSeverity>0.67</minSeverity>
        <painOffset>0.15</painOffset>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <offset>-0.10</offset>
          </li>
        </capMods>
      </li>
    </stages>
    <comps>
      <li Class="TheSecondSeat.HediffCompProperties_CrimsonBloom" />
    </comps>
  </HediffDef>

  <!-- ============================================== -->
  <!-- 血染领域 Crimson Domain - 光环版猩红绽放 -->
  <!-- ============================================== -->
  <AbilityDef>
    <defName>Sideria_CrimsonDomain</defName>
    <label>crimson domain</label>
    <description>Sideria unleashes her crimson power, creating a domain of blooming death. For the next 10 seconds, all enemies within range are continuously marked with crimson bloom layers every second. When three layers are reached, the mark erupts, destroying a vital organ.</description>
    <iconPath>UI/Abilities/CrimsonDomain</iconPath>
    <cooldownTicksRange>2500</cooldownTicksRange>
    <displayGizmoWhileUndrafted>false</displayGizmoWhileUndrafted>
    <disableGizmoWhileUndrafted>true</disableGizmoWhileUndrafted>
    <canUseAoeToGetTargets>false</canUseAoeToGetTargets>
    <targetRequired>false</targetRequired>
    <verbProperties>
      <verbClass>Verb_CastAbility</verbClass>
      <range>0</range>
      <warmupTime>0.5</warmupTime>
      <targetParams>
        <canTargetSelf>true</canTargetSelf>
        <canTargetAnimals>false</canTargetAnimals>
        <canTargetHumans>false</canTargetHumans>
        <canTargetMechs>false</canTargetMechs>
        <canTargetBuildings>false</canTargetBuildings>
        <canTargetLocations>false</canTargetLocations>
      </targetParams>
    </verbProperties>
    <comps>
      <li Class="RimWorld.CompProperties_AbilityGiveHediff">
        <compClass>RimWorld.CompAbilityEffect_GiveHediff</compClass>
        <hediffDef>Sideria_CrimsonDomainEffect</hediffDef>
        <onlyApplyToSelf>true</onlyApplyToSelf>
      </li>
    </comps>
  </AbilityDef>

  <!-- 血染领域效果 - 施放在自身的光环 Hediff -->
  <HediffDef>
    <defName>Sideria_CrimsonDomainEffect</defName>
    <label>crimson domain</label>
    <description>A field of crimson energy radiates from Sideria, continuously applying crimson bloom marks to all nearby enemies.</description>
    <hediffClass>HediffWithComps</hediffClass>
    <isBad>false</isBad>
    <tendable>false</tendable>
    <makesSickThought>false</makesSickThought>
    <makesAlert>false</makesAlert>
    <initialSeverity>1.0</initialSeverity>
    <stages>
      <li>
        <label>active</label>
      </li>
    </stages>
    <comps>
      <li Class="HediffCompProperties_Disappears">
        <disappearsAfterTicks>600</disappearsAfterTicks>
        <showRemainingTime>true</showRemainingTime>
      </li>
      <li Class="TheSecondSeat.Hediffs.HediffCompProperties_ApplyAura">
        <radius>9.9</radius>
        <checkInterval>60</checkInterval>
        <hediffToApply>Sideria_CrimsonBloomMark</hediffToApply>
        <affectEnemies>true</affectEnemies>
        <affectAllies>false</affectAllies>
        <affectSelf>false</affectSelf>
        <stackMode>CustomMethod</stackMode>
        <stackMethodName>AddStack</stackMethodName>
        <initialSeverity>0.33</initialSeverity>
      </li>
    </comps>
  </HediffDef>

  <!-- ============================================== -->
  <!-- 世界 The World - 时间停止 -->
  <!-- ============================================== -->
  <AbilityDef>
    <defName>Sideria_TheWorld</defName>
    <label>the world</label>
    <description>Sideria invokes her absolute dominion over time itself, freezing the world around her. For the duration, all creatures except Sideria are frozen in time - unable to move, act, or perceive the passage of moments. Time resumes when the effect ends.</description>
    <iconPath>UI/Abilities/TheWorld</iconPath>
    <cooldownTicksRange>7500</cooldownTicksRange>
    <displayGizmoWhileUndrafted>false</displayGizmoWhileUndrafted>
    <disableGizmoWhileUndrafted>true</disableGizmoWhileUndrafted>
    <canUseAoeToGetTargets>false</canUseAoeToGetTargets>
    <targetRequired>false</targetRequired>
    <verbProperties>
      <verbClass>Verb_CastAbility</verbClass>
      <range>0</range>
      <warmupTime>0.25</warmupTime>
      <targetParams>
        <canTargetSelf>true</canTargetSelf>
        <canTargetAnimals>false</canTargetAnimals>
        <canTargetHumans>false</canTargetHumans>
        <canTargetMechs>false</canTargetMechs>
        <canTargetBuildings>false</canTargetBuildings>
        <canTargetLocations>false</canTargetLocations>
      </targetParams>
    </verbProperties>
    <comps>
      <li Class="RimWorld.CompProperties_AbilityGiveHediff">
        <compClass>RimWorld.CompAbilityEffect_GiveHediff</compClass>
        <hediffDef>Sideria_TheWorldEffect</hediffDef>
        <onlyApplyToSelf>true</onlyApplyToSelf>
      </li>
    </comps>
  </AbilityDef>

  <!-- 世界效果 - 时停 Hediff -->
  <HediffDef>
    <defName>Sideria_TheWorldEffect</defName>
    <label>the world</label>
    <description>Time itself bends to Sideria's will. All other creatures are frozen in place, unable to act or perceive.</description>
    <hediffClass>HediffWithComps</hediffClass>
    <isBad>false</isBad>
    <tendable>false</tendable>
    <makesSickThought>false</makesSickThought>
    <makesAlert>false</makesAlert>
    <initialSeverity>1.0</initialSeverity>
    <stages>
      <li>
        <label>time stop</label>
        <statOffsets>
          <MoveSpeed>2.0</MoveSpeed>
        </statOffsets>
      </li>
    </stages>
    <comps>
      <li Class="HediffCompProperties_Disappears">
        <disappearsAfterTicks>300</disappearsAfterTicks>
        <showRemainingTime>true</showRemainingTime>
      </li>
      <li Class="TheSecondSeat.Hediffs.HediffCompProperties_TimeStop" />
    </comps>
  </HediffDef>

  <!-- ============================================== -->
  <!-- 灵龙消散 Hediff - 控制召唤持续时间 -->
  <!-- ============================================== -->
  <HediffDef>
    <defName>Sideria_SpiritDragonDissipation</defName>
    <label>spirit dissipation</label>
    <description>This spirit dragon is gradually losing its connection to the material world. When the effect expires, it will return to the spirit realm.</description>
    <hediffClass>HediffWithComps</hediffClass>
    <isBad>false</isBad>
    <initialSeverity>1.0</initialSeverity>
    <minSeverity>0</minSeverity>
    <maxSeverity>1.0</maxSeverity>
    <stages>
      <li>
        <label>fading</label>
        <minSeverity>0.01</minSeverity>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <offset>-0.20</offset>
          </li>
        </capMods>
      </li>
      <li>
        <label>stable</label>
        <minSeverity>0.5</minSeverity>
      </li>
    </stages>
    <comps>
      <li Class="TheSecondSeat.HediffCompProperties_DragonDissipation">
        <dissipationTicks>15000</dissipationTicks>
      </li>
    </comps>
  </HediffDef>
</Defs>
