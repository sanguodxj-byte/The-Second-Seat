# 区域交互系统 - 快速参考 - v1.6.40

## ?? 功能概述

全身立绘面板新增**区域交互系统**：
- **头部摸摸**：摩擦累积触发
- **身体戳戳**：单击即时触发

---

## ?? 核心参数

| 参数 | 值 | 说明 |
|------|---|------|
| `HEAD_RUB_THRESHOLD` | 60 | 触发阈值 |
| `HEAD_RUB_DECAY_RATE` | 20/秒 | 衰减速度 |
| `HEAD_PAT_COOLDOWN` | 3秒 | 冷却时间 |

---

## ?? 交互对比

| 交互 | 触发 | 好感度 | 表情 |
|-----|------|--------|------|
| **头部摸摸** | 摩擦 60 点 | +3 | 害羞/开心 |
| **身体戳戳** | 单击 | +1 | 惊讶/困惑 |

---

## ?? 关键特性

### 1. **区域定义**

```csharp
enum InteractionZone
{
    None,   // 无
    Head,   // 上方 25%
    Body    // 其余 + 不透明
}
```

### 2. **头部摸摸**

- 累积：移动距离 × 0.5
- 衰减：离开后 20/秒
- 冷却：3 秒
- 显示：进度条（立绘上方）

### 3. **身体戳戳**

- 触发：单击左键
- 检测：不透明像素
- 即时：无需累积

### 4. **输入拦截**

```csharp
Event.current.Use();  // 防止穿透
```

---

## ?? 测试指南

### 头部摸摸
1. 鼠标移到立绘上方 25%
2. 按住左键摩擦
3. 观察进度条上升
4. 达到 60 时触发

### 身体戳戳
1. 鼠标移到立绘中心
2. 单击左键
3. 立即触发

---

## ?? 部署状态

? 已编译  
? 已部署  
?? 待测试

---

**版本**: v1.6.40  
?? **区域交互系统完成！** ??
