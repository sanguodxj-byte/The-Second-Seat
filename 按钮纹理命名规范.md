# ?? AI 叙事者按钮纹理命名规范

## ?? 纹理文件位置

```
Textures/UI/
├── NarratorButton_Ready.png       ← 就绪状态
├── NarratorButton_Processing.png  ← 处理中状态
├── NarratorButton_Error.png       ← 错误状态
└── NarratorButton_Disabled.png    ← 禁用状态
```

---

## ?? 各状态说明

### 1?? Ready（就绪）
**文件名**：`NarratorButton_Ready.png`  
**状态**：系统已连接，等待游戏事件触发  
**视觉**：
- 标准灰色/白色线条
- 无动画
- 小指示灯：柔和的绿色圆点

**动画**：无动画，静态显示

---

### 2?? Processing（处理中）
**文件名**：`NarratorButton_Processing.png`  
**状态**：正在进行 RAG 检索或 LLM 文本生成  
**视觉**：
- 琥珀色/黄色发光
- 小指示灯：琥珀色闪烁

**动画**：
- ? 脉冲缩放（95% - 105%）
- ? 缓慢旋转（30°/秒）
- ? 外发光效果（琥珀色）
- ? 透明度闪烁（70% - 100%）

---

### 3?? Error（错误）
**文件名**：`NarratorButton_Error.png`  
**状态**：API Key 无效、网络中断、或达到速率限制  
**视觉**：
- 红色闪烁
- 小指示灯：鲜红色的 'X' 符号

**动画**：
- ? 快速闪烁（透明度 70% - 100%）
- ? 红色外发光
- ? 无旋转

---

### 4?? Disabled（禁用）
**文件名**：`NarratorButton_Disabled.png`  
**状态**：Mod 设置中被用户明确关闭  
**视觉**：
- 标准灰色，透明度 50%
- 小指示灯：灰色暗淡

**动画**：无动画，静态显示，半透明

---

## ?? 纹理规格

### 统一规格
- **尺寸**：256x256 像素（推荐）
- **格式**：PNG with Alpha 通道
- **DPI**：72 或 96
- **颜色模式**：RGBA

### 内容要求
- **主图标**：科技感圆形图案（电路、齿轮等）
- **背景**：深色半透明（#1A1A1A, Alpha 90%）
- **边框**：圆角矩形，发光效果
- **指示灯位置**：右上角（可选，代码会额外绘制）

---

## ?? 设计指南

### Ready（就绪）
```
颜色方案：
- 主色：#CCCCCC（浅灰）
- 发光：无或淡白色
- 指示灯：#00FF88（绿色）

视觉风格：
- 平静、稳定
- 无动态元素
- 简洁线条
```

### Processing（处理中）
```
颜色方案：
- 主色：#FFB84D（琥珀色）
- 发光：#FFCC66（黄色）
- 指示灯：#FFA500（橙色）

视觉风格：
- 能量感、活跃
- 可以有旋转元素
- 电流/脉冲纹理
```

### Error（错误）
```
颜色方案：
- 主色：#FF3333（鲜红）
- 发光：#FF6666（红色发光）
- 指示灯：#FF0000（纯红）

视觉风格：
- 警告感、紧急
- 错误符号（X、！）
- 裂纹/断裂效果
```

### Disabled（禁用）
```
颜色方案：
- 主色：#808080（灰色）
- 透明度：50%
- 指示灯：#666666（暗灰）

视觉风格：
- 失活、暗淡
- 模糊/虚化效果
- 无发光
```

---

## ?? 动画效果（代码实现）

### 脉冲缩放
```csharp
float scale = Mathf.Lerp(0.95f, 1.05f, 
    (Mathf.Sin(Time.realtimeSinceStartup * 2f) + 1f) / 2f);
```

### 闪烁透明度
```csharp
float alpha = Mathf.Lerp(0.7f, 1.0f, 
    (Mathf.Sin(Time.realtimeSinceStartup * 4f) + 1f) / 2f);
```

### 旋转动画
```csharp
float rotation = (Time.realtimeSinceStartup * 30f) % 360f;
```

---

## ?? 状态切换逻辑

### 状态优先级（从高到低）
1. **Disabled** - 模组被禁用
2. **Error** - 有错误发生
3. **Processing** - 正在处理
4. **Ready** - 默认就绪

### 代码示例
```csharp
private void UpdateButtonState()
{
    // 1. 检查禁用
    if (TheSecondSeatMod.settings?.enableMod == false)
    {
        currentState = NarratorButtonState.Disabled;
        return;
    }
    
    // 2. 检查错误
    if (controller != null && !string.IsNullOrEmpty(controller.LastError))
    {
        currentState = NarratorButtonState.Error;
        return;
    }
    
    // 3. 检查处理中
    if (controller?.IsProcessing ?? false)
    {
        currentState = NarratorButtonState.Processing;
        return;
    }
    
    // 4. 默认就绪
    currentState = NarratorButtonState.Ready;
}
```

---

## ?? 状态提示文本

### 悬停提示（Tooltip）
| 状态 | 中文 | 英文 |
|-----|------|------|
| Ready | 连接就绪，等待事件 | Connection ready, waiting for events |
| Processing | 正在分析/生成叙事内容... | Analyzing/Generating narrative content... |
| Error | 错误！请检查 API 密钥或网络 | Error! Please check API key or network |
| Disabled | Mod 已禁用 | Mod is disabled |

---

## ??? 示例效果

### Ready（就绪）
```
┌────────────────┐
│   q────────r   │ ← 浅灰色
│   │  ?? AI │   │   无动画
│   t────────s   │
│            ● ←─ 绿色指示灯
└────────────────┘
```

### Processing（处理中）
```
┌────────────────┐
│ ? q────────r ? │ ← 琥珀色
│   │  ?? AI │   │   旋转+脉冲
│ ? t────────s ? │   发光效果
│            ? ←─ 橙色闪烁
└────────────────┘
```

### Error（错误）
```
┌────────────────┐
│   q────────r   │ ← 红色
│   │  ? AI │   │   快速闪烁
│   t────────s   │   红色发光
│            ? ←─ 红色 X
└────────────────┘
```

### Disabled（禁用）
```
┌────────────────┐
│   q────────r   │ ← 灰色 50%
│   │  ? AI │   │   无动画
│   t────────s   │   半透明
│            ○ ←─ 灰色暗淡
└────────────────┘
```

---

## ?? 实现清单

### 已实现 ?
- [x] 动画系统（NarratorButtonAnimator.cs）
- [x] 状态枚举（NarratorButtonState）
- [x] 脉冲缩放动画
- [x] 闪烁透明度动画
- [x] 旋转动画
- [x] 外发光效果
- [x] 状态切换逻辑
- [x] 指示灯绘制
- [x] 中英文翻译

### 待添加 ?
- [ ] 4 个状态纹理（PNG 文件）
- [ ] 可选：音效反馈
- [ ] 可选：粒子效果

---

## ?? 测试指南

### 测试 Ready 状态
```
1. 启动游戏
2. 确认 API 已配置
3. 查看按钮（灰白色，绿色指示灯）
```

### 测试 Processing 状态
```
1. 打开 AI 窗口
2. 发送消息
3. 观察按钮（琥珀色脉冲+旋转）
```

### 测试 Error 状态
```
1. 故意使用错误的 API Key
2. 发送消息
3. 观察按钮（红色闪烁）
```

### 测试 Disabled 状态
```
1. 模组设置 → 禁用 Mod
2. 观察按钮（灰色半透明）
```

---

## ?? 设计工具推荐

### 推荐软件
1. **GIMP**（免费）- 图像编辑
2. **Inkscape**（免费）- 矢量图标
3. **Aseprite**（付费）- 像素动画
4. **Photoshop**（付费）- 专业编辑

### 在线工具
1. **Figma** - UI 设计
2. **Photopea** - 在线 PS
3. **Pixlr** - 简单编辑

---

## ?? 快速开始

### 最小实现（无纹理）
```
当前系统已支持：
? 纯代码绘制
? 完整动画效果
? 状态切换
? 即使没有纹理也能正常工作
```

### 添加纹理步骤
```
1. 设计 4 个状态的 PNG 图标（256x256）
2. 命名为对应文件名
3. 放入 Textures/UI/ 文件夹
4. 重启游戏，自动加载
```

---

**创建时间**：2025-01-XX  
**适用版本**：The Second Seat v1.0+  
**纹理数量**：4 个状态图标

?? **开始设计你的科技感按钮纹理吧！** ??
