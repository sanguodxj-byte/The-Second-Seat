# 表情文件放置说明

## ?? 文件夹结构

```
Sideria/
├── happy.png         → 完整立绘 (1080x1920)
├── happy1.png        → ? 开心表情变体1（可选）
├── happy2.png        → ? 开心表情变体2（可选）
├── sad.png
├── angry.png
├── shy.png           → ? 新增：害羞表情
└── layers/           → 分层资源（可选）
   ├── eyes_happy.png
   ├── eyes_sad.png
   ├── mouth_smile.png
   └── mouth_frown.png
```

## ?? 支持的表情

### 完整立绘（推荐）
- `happy.png` - 开心表情 ?
- `happy1.png` - ? 开心表情变体1（随机选择）
- `happy2.png` - ? 开心表情变体2（随机选择）
- `sad.png` - 悲伤表情
- `sad1.png` - ? 悲伤表情变体1（可选）
- `angry.png` - 愤怒表情
- `angry1.png` - ? 愤怒表情变体1（可选）
- `surprised.png` - 惊讶表情
- `worried.png` - 担忧表情
- `smug.png` - 得意表情
- `disappointed.png` - 失望表情
- `thoughtful.png` - 沉思表情
- `annoyed.png` - 烦躁表情
- `playful.png` - 调皮表情
- `shy.png` - ? **新增：害羞表情**
- `shy1.png` - ? 害羞表情变体1（可选）

### 面部区域表情（可选）
- `happy_face.png` - 只包含面部
- `sad_face.png`
- 等等...

## ?? 文件规范

### 完整立绘
- **尺寸**: 1080x1920 (或与基础立绘相同)
- **格式**: PNG
- **透明**: 支持

### 分层资源
- **尺寸**: 根据面部区域决定
- **格式**: PNG
- **透明**: 必须支持，面部区域需透明背景

## ? 表情变体系统

### 工作原理
当切换到某个表情时，系统会**自动随机选择**一个变体：
- `happy.png`、`happy1.png`、`happy2.png`... 中随机选一个
- 最多支持 **5 个变体**（基础 + 变体1-5）

### 示例
```
happy.png     → 基础开心表情
happy1.png    → 稍微眯眼的开心
happy2.png    → 张嘴大笑的开心
happy3.png    → 捂嘴偷笑的开心
```

**效果**：每次切换到开心表情时，会随机显示其中一个，让立绘更生动！

## ? 新增：害羞表情

### 触发条件
- 对话包含：**害羞、不好意思、脸红、感谢、谢谢** 等关键词
- 好感度变化（某些场景）
- TTS 情感：使用 **gentle（温柔）风格**

### 文件命名
- `shy.png` - 基础害羞表情
- `shy1.png` - 害羞变体1（可选）
- `shy2.png` - 害羞变体2（可选）

## ?? 优势

使用 Expressions 文件夹的好处：
1. ? 表情独立时只依赖 `base.png`
2. ? 文件结构清晰易管理
3. ? 文件组织更加规范
4. ? **支持随机变体，立绘更生动**

## ?? 迁移

如果你的表情还在旧文件夹，使用迁移脚本：
```powershell
.\Reorganize-Expressions.ps1
```

## ?? 注意事项

- 文件名必须**全小写**
- PNG 格式
- 尺寸应与基础立绘一致
- 如果缺少某个表情，系统会自动回退到基础立绘
- 变体文件**可选**，不强制要求
- 随机变体每次切换表情时才触发

## ?? 表情优先级

```
表情变体（随机） > 基础表情 > 基础立绘
```

**示例**：
1. 系统要显示"开心"表情
2. 查找 `happy.png`、`happy1.png`、`happy2.png`...
3. 随机选择一个存在的文件
4. 如果都不存在，使用 `base.png`
