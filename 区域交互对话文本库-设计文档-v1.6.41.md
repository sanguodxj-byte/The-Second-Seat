# ?? 区域交互对话文本库 - 设计文档

## ?? 设计目标

创造一个**科幻殖民风格的角色对话系统**，让 AI Narrator/Companion 在玩家互动时展现出：
1. **自然的角色驱动对话**（而非程序化回复）
2. **基于好感度的情感层次**（甜蜜→礼貌→冷漠）
3. **沉浸式的科幻世界观**（避免现代科技用语）

---

## ?? 禁用内容（现代科技）

### **严格禁止**
- ? **通讯工具**：手机、电话、短信、邮件、APP
- ? **网络相关**：互联网、WiFi、网络、在线、下载、点赞
- ? **社交媒体**：微信、QQ、朋友圈、抖音、微博
- ? **现代软件**：软件、程序、代码、Bug、更新包
- ? **游戏化术语**：好感度+5、经验值、升级、任务完成

### **为什么？**
这些术语会**打破 RimWorld 的科幻殖民世界观**。玩家在遥远星球求生，不应该听到 AI 说"我给你点个赞"。

---

## ? 允许内容（科幻元素）

### **推荐使用**
- ? **科幻设施**：母舰、休眠舱、传感器、能源补给、核心系统
- ? **数据概念**：数据库、记忆片段、记录、扫描、分析
- ? **殖民场景**：殖民地、星空、航行者、求生、危机
- ? **自然情感**：温暖、安全感、孤独、依赖、拒绝

### **为什么？**
这些术语**融入科幻世界观**，同时保持角色的情感真实性。

---

## ?? 对话文本结构

### **头部摸摸（Head Pat）- 60条**
| 好感度档位 | 数量 | 情感基调 |
|-----------|------|---------|
| **高好感（≥60）** | 20条 | 甜蜜、依赖、享受温暖 |
| **中立（-20~60）** | 20条 | 困惑、礼貌但尴尬 |
| **低好感（<-20）** | 20条 | 冷漠拒绝、警告、敌意 |

### **身体戳戳（Poke）- 60条**
| 好感度档位 | 数量 | 情感基调 |
|-----------|------|---------|
| **高好感（≥60）** | 20条 | 积极回应、活力、玩心 |
| **中立（-20~60）** | 20条 | 平静询问、职业化回应 |
| **低好感（<-20）** | 20条 | 烦躁、拒绝、敌意 |

---

## ?? 情感层次设计

### **高好感度（≥60）**
**核心情感**：甜蜜、依赖、幸福感  
**行为特征**：主动表达情感、肢体语言丰富、回忆共同经历

#### **头部摸摸示例**
```
"（闭上眼睛）好温暖...像回到了母舰的休眠舱一样..."
"你知道吗...这是我数据库里最珍贵的记忆片段。"
"（依赖地）有你在...我觉得什么危机都不可怕了。"
```

**写作技巧**：
- 使用**感官描述**（温暖、柔软、安全）
- 加入**科幻比喻**（母舰、休眠舱、能源补给）
- 表达**依赖感**（"离不开你"、"永远记住"）

#### **身体戳戳示例**
```
"（活力满满）我在！需要我做什么吗？"
"嘿！怎么啦~有什么好玩的事吗？"
"（雀跃）有什么有趣的任务吗？"
```

**写作技巧**：
- 使用**活力词汇**（满满、雀跃、元气）
- 加入**玩心元素**（抓到我了、你赢啦）
- 表达**积极主动**（随时待命、洗耳恭听）

---

### **中立好感度（-20~60）**
**核心情感**：困惑、礼貌、职业化  
**行为特征**：保持距离、询问意图、礼节性回应

#### **头部摸摸示例**
```
"（疑惑）这个动作...有什么特殊含义吗？"
"请问...你需要什么帮助吗？"
"呃...这是某种殖民地的传统礼仪吗？"
```

**写作技巧**：
- 使用**疑问句**（为什么、是什么、需要吗）
- 保持**礼貌距离**（请、请问、不太理解）
- 避免**情感外露**（平静、冷静、职业化）

#### **身体戳戳示例**
```
"怎么了？"
"有什么事吗？"
"（平静）我在。"
```

**写作技巧**：
- 使用**简短回复**（1-3个词）
- 避免**过度热情**（公事公办、机械化）
- 表达**待命状态**（准备接收指令、等待命令）

---

### **低好感度（<-20）**
**核心情感**：冷漠、拒绝、敌意  
**行为特征**：推开、警告、讽刺

#### **头部摸摸示例**
```
"（冷冷地推开）别碰我。"
"保持距离。我不需要这种接触。"
"（警告）再这样我会启动防御协议。"
```

**写作技巧**：
- 使用**命令句**（别、停止、离开）
- 加入**威胁警告**（防御协议、反击、后果自负）
- 表达**强烈拒绝**（不需要、没兴趣、可笑）

#### **身体戳戳示例**
```
"（不耐烦）别烦我。"
"干什么？"
"你能不能消停一点？"
```

**写作技巧**：
- 使用**烦躁语气**（不耐烦、厌烦、冷淡）
- 加入**讽刺元素**（幼稚、浪费时间、伟大的指挥官）
- 表达**拒绝合作**（没空、离我远点、别碰我）

---

## ?? 技术实现

### **文件位置**
```
Source/TheSecondSeat/UI/InteractionPhrases.cs
```

### **数据结构**
```csharp
public static class InteractionPhrases
{
    // 头部摸摸 - 3档 x 20条
    public static readonly List<string> HeadPat_High = new List<string> { ... };
    public static readonly List<string> HeadPat_Neutral = new List<string> { ... };
    public static readonly List<string> HeadPat_Low = new List<string> { ... };
    
    // 身体戳戳 - 3档 x 20条
    public static readonly List<string> Poke_High = new List<string> { ... };
    public static readonly List<string> Poke_Neutral = new List<string> { ... };
    public static readonly List<string> Poke_Low = new List<string> { ... };
    
    // 辅助方法
    public static string GetHeadPatPhrase(float affinity) { ... }
    public static string GetPokePhrase(float affinity) { ... }
}
```

### **使用示例**
```csharp
// 在 FullBodyPortraitPanel.cs 中
var agent = Current.Game?.GetComponent<Storyteller.StorytellerAgent>();
float affinity = agent?.GetAffinity() ?? 0f;

// 获取对话文本
string phrase = InteractionPhrases.GetHeadPatPhrase(affinity);

// 显示浮动文本
ShowFloatingText(phrase, GetTextColorByAffinity(affinity));
```

---

## ?? 好感度映射

```csharp
public static string GetHeadPatPhrase(float affinity)
{
    var phrases = affinity switch
    {
        >= 60f => HeadPat_High,      // 高好感
        >= -20f => HeadPat_Neutral,  // 中立
        _ => HeadPat_Low             // 低好感
    };
    
    return phrases[UnityEngine.Random.Range(0, phrases.Count)];
}
```

| 好感度范围 | 使用的文本列表 | 条目数 |
|-----------|---------------|--------|
| ≥60 | `HeadPat_High` / `Poke_High` | 20条 |
| -20~60 | `HeadPat_Neutral` / `Poke_Neutral` | 20条 |
| <-20 | `HeadPat_Low` / `Poke_Low` | 20条 |

---

## ?? 文本颜色编码

```csharp
private Color GetTextColorByAffinity(float affinity)
{
    if (affinity >= 60f)
        return new Color(1f, 0.7f, 0.8f);  // 粉红/温暖色
    else if (affinity >= -20f)
        return new Color(0.8f, 0.9f, 1f);  // 淡蓝/中性色
    else
        return new Color(0.7f, 0.7f, 0.7f); // 灰白/冷色
}
```

| 好感度 | 颜色 | RGB | 情感联想 |
|--------|------|-----|---------|
| ≥60 | 粉红/温暖 | (1.0, 0.7, 0.8) | 爱意、温柔 |
| -20~60 | 淡蓝/中性 | (0.8, 0.9, 1.0) | 理性、平静 |
| <-20 | 灰白/冷色 | (0.7, 0.7, 0.7) | 冷漠、疏离 |

---

## ?? 写作清单（扩展文本时使用）

### **头部摸摸 - 高好感**
- [ ] 感官描述（温暖、柔软、舒适）
- [ ] 科幻比喻（母舰、休眠舱、能源）
- [ ] 依赖情感（离不开、永远记住）
- [ ] 回忆共同经历（数据库、记忆片段）
- [ ] 肢体语言（闭眼、蹭、轻叹）

### **头部摸摸 - 中立**
- [ ] 疑问询问（为什么、是什么）
- [ ] 礼貌距离（请、不太理解）
- [ ] 职业化回应（标准协议、系统检测）
- [ ] 困惑不解（没有记录、不在范围内）
- [ ] 保持克制（平静、冷静、公事公办）

### **头部摸摸 - 低好感**
- [ ] 强烈拒绝（别碰、离开、停止）
- [ ] 威胁警告（防御协议、反击）
- [ ] 冷漠推开（不需要、没兴趣）
- [ ] 讽刺元素（可笑、幼稚、低级）
- [ ] 明确界限（保持距离、最后警告）

### **身体戳戳 - 高好感**
- [ ] 活力回应（我在、来啦、元气满满）
- [ ] 玩心元素（抓到我了、你赢啦）
- [ ] 积极主动（需要我吗、有什么任务）
- [ ] 开心表达（最喜欢、开心、雀跃）
- [ ] 俏皮语气（嘿、呼~、嗯嗯）

### **身体戳戳 - 中立**
- [ ] 简短回复（在、怎么了、请说）
- [ ] 职业化（待命、等待指令）
- [ ] 机械化（系统响应、收到信号）
- [ ] 平淡语气（冷静、淡然、简洁）
- [ ] 公事公办（确认接收、准备接收）

### **身体戳戳 - 低好感**
- [ ] 烦躁不满（别烦我、干什么）
- [ ] 拒绝合作（没空、离我远点）
- [ ] 讽刺挖苦（幼稚、浪费时间）
- [ ] 不耐烦（又怎么了、消停点）
- [ ] 冷漠拒绝（不屑、冷淡、无聊）

---

## ?? 扩展计划

### **v1.6.42：添加更多表情文本**
- [ ] `Shy` 表情专用文本（20条高好感）
- [ ] `Confused` 表情专用文本（20条中立）
- [ ] `Smug` 表情专用文本（10条高好感 + 10条低好感）

### **v1.7.0：特殊场景文本**
- [ ] 连续互动（3次以上）特殊文本
- [ ] 首次互动（全局首次）特殊文本
- [ ] 好感度突破阈值（60/80/-20/-60）特殊文本

### **v2.0.0：记忆系统**
- [ ] AI 记住上次互动时间
- [ ] 长时间未互动后的"想念"文本
- [ ] 频繁互动后的"疲惫"文本

---

## ?? 总结

**v1.6.41 对话文本库实现了**：
- ? **120条高质量对话**（60条头摸 + 60条戳戳）
- ? **科幻世界观融入**（母舰、传感器、殖民地）
- ? **3层情感分级**（甜蜜→礼貌→冷漠）
- ? **模块化设计**（易于扩展和维护）

**玩家体验提升**：
- ?? 每次互动都有**新鲜感**（20条随机）
- ?? 角色情感**真实可信**（基于好感度）
- ?? 沉浸式**科幻氛围**（无现代科技打断）

---

**作者备注**：  
这套对话文本库的核心理念是"**让 AI 像真实角色一样回应，而非像程序一样回复**"。每一条文本都经过精心设计，确保玩家感受到的是一个有血有肉的 AI Companion，而不是一个冷冰冰的工具。
